{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/CanvasBox.vue?c72c","webpack:///./src/data/weather.filtered.csv","webpack:///./src/App.vue?d8a7","webpack:///./src/components/CanvasBox.vue?379c","webpack:///./src/core/constants.ts","webpack:///./src/core/utils.ts","webpack:///./src/store/index.js","webpack:///./src/core/index.ts","webpack:///src/components/CanvasBox.vue","webpack:///./src/components/CanvasBox.vue?a571","webpack:///./src/components/CanvasBox.vue","webpack:///./src/core/data-gen.ts","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/data/reading.filtered.csv","webpack:///./src/App.vue?f446","webpack:///./src/data/airline.filtered.csv","webpack:///./src/data/stocks.filtered.csv"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","on","eventHandler","staticClass","_v","directives","rawName","expression","ref","readFileHandler","slot","style","width","margin","padding","display","flexDirection","staticStyle","model","callback","$$v","aggregateAttr","_l","attr","_s","timeAttr","inferTypes","_e","valueAttr","headers","generateCharts","chartConfigs","config","aggregateName","timeName","valueName","timeIndex","valueIndex","filter","$event","handleFilterChange","staticRenderFns","height","cursor","transform","upsideDownFactor","startMouse","moveMouse","angleConfirm","resetFilter","filterMode","rawMode","diverse","colorMap","$set","previewIndex","rawLines","rawLineNames","previewData","maxDensity","upsideDown","exportFig","MAX_REPEATS_X","Infinity","MAX_REPEATS_Y","binsx","binsy","__values","iterator","next","done","TypeError","range","out","Float32Array","Math","floor","exportCanvas","canvas","e_1","_a","document","createElement","context","getContext","scale","canvas_1","canvas_1_1","cvs","drawImage","e_1_1","error","return","exportBtn","href","toDataURL","replace","download","click","slope","array","min","max","map","x","aggregatedData","__assign","assign","arguments","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","step","e","rejected","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","v","op","pop","ar","concat","lineWidth","tangentExtent","normalExtent","doNormalize","colorMask","mask","numSeries","maxDataPoints","heatmapWidth","heatmapHeight","gaussianIndexOffset","regl","maxRenderbufferSize","maxRepeatsX","maxRepeatsY","repeatsX","repeatsY","reshapedWidth","reshapedHeight","drawLine","drawFlatLine","computeBase","gaussian","sum","normalize","mergeBufferHorizontally","mergeBufferVertically","drawTexture","filterByAngles","filterByValues","findMax","calWeight","linesBuffer","gaussianBuffer","flatLinesBuffer","filterAngleBuffer","sumsBuffer","resultBuffer","preMergedBuffer","heatBuffer","maxValueBuffer","batchSize","series","finishedSeries","b","lines","row","valueLength","indexCache","_b","attribute","binX","stop","start","binY","undefined","gaussianKernel","scaleOption","xRatio","yRatio","xOffset","yOffset","find","gaussianRow","Error","round","console","info","extensions","attributes","preserveDrawingBuffer","alert","limits","ceil","vert","frag","uniforms","maxX","prop","maxY","column","time","depth","enable","count","primitive","framebuffer","lineIdx","blend","func","srcRGB","srcAlpha","dstRGB","dstAlpha","equation","rgb","alpha","color","position","offsetY","kernelValue","offsetX","join","buffer","sums","maxi","reduce","startTime","endTime","startAngle","endAngle","startValue","endValue","heat","colorFormat","colorType","timeEnd","clear","Array","loop","xValues","values","yValues","times","flatOut","read","log","filterAngle","filterResult","filterRange","findKTop","isHighest","weights","w","includes","sort","a","diversityList","flag","_loop_1","insertLine","testLine","testLength","subArr","standardDeviation","state_1","rerender","indexes","loop2","destroy","avg","average","squareDiffs","diff","sqrDiff","avgSquareDiff","stdDev","sqrt","props","Number","String","contextHandler","canvasContext","rawLineContext","mouseDown","listener","hoverListener","coord","boxes","computed","watch","getTopK","clearRect","globalAlpha","strokeStyle","beginPath","moveTo","lineTo","stroke","methods","hoverLines","kArray","$refs","removeEventListener","addEventListener","$emit","startFilter","drawBoxes","cursorShape","movementX","movementY","fillStyle","fillRect","offset","fill","left","right","bottom","top","end","mounted","$Spin","show","setTimeout","yValue","minY","xValue","minX","scopeData","beforeDestroy","component","exampleDataURL","default","generateData","idx","skip_empty_lines","readData","file","res","reader","FileReader","onload","readAsText","parseField","type","Date","parseFloat","components","CanvasBox","filters","startsWith","split","upload","handleClick","hide","preProcessData","isDate","test","indexOf","aggrMap","has","aggrKey","aggrList","set","infers","index","forEach","Vue","use","iView","productionTip","render","h","App","$mount","gl","debugInfo","getExtension","gpuInfo","getParameter","UNMASKED_RENDERER_WEBGL","toLowerCase"],"mappings":"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","file":"js/app.e0914325.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasBox.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasBox.vue?vue&type=style&index=0&lang=scss&\"","export default __webpack_public_path__ + \"6d2953db31970ebe713bfa30b737ad62.csv\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Layout',[_c('Header',[_c('Menu',{attrs:{\"mode\":\"horizontal\",\"theme\":\"dark\"},on:{\"on-select\":_vm.eventHandler}},[_c('h1',{staticClass:\"layout-logo\"},[_vm._v(\"Density-based Timebox\")]),_c('div',{staticClass:\"layout-nav\"},[_c('Upload',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"upload\",attrs:{\"action\":\"/\",\"before-upload\":_vm.readFileHandler}}),_c('Submenu',{attrs:{\"name\":\"3\"}},[_c('template',{slot:\"title\"},[_c('Icon',{attrs:{\"type\":\"ios-archive\"}}),_vm._v(\" Example data \")],1),_c('MenuItem',{attrs:{\"name\":\"1-1\"}},[_vm._v(\"Stocks(25.2M)\")]),_c('MenuItem',{attrs:{\"name\":\"1-2\"}},[_vm._v(\"Airline(10.6M)\")]),_c('MenuItem',{attrs:{\"name\":\"1-3\"}},[_vm._v(\"Weather(29.6M)\")]),_c('MenuItem',{attrs:{\"name\":\"1-4\"}},[_vm._v(\"Reading(18.5M)\")])],2),_c('MenuItem',{attrs:{\"name\":\"2\"}},[_c('Icon',{attrs:{\"type\":\"ios-cloud-upload-outline\"}}),_vm._v(\" Load data \")],1)],1)])],1),_c('Content',{style:({\n        width: '1850px',\n        margin: '0 auto',\n        padding: '0 50px',\n        display: 'flex',\n        flexDirection: 'row',\n      })},[_c('Card',{staticClass:\"sticky-content\"},[_c('div',[_c('p',[_vm._v(\"Line Aggregation Attribute:\")]),_c('Select',{staticStyle:{\"width\":\"200px\"},model:{value:(_vm.aggregateAttr),callback:function ($$v) {_vm.aggregateAttr=$$v},expression:\"aggregateAttr\"}},_vm._l((_vm.headers),function(attr,i){return _c('Option',{key:i,attrs:{\"value\":i}},[_vm._v(_vm._s(attr))])}),1),_c('p',[_vm._v(\"Time Attribute:\")]),_c('Select',{staticStyle:{\"width\":\"200px\"},model:{value:(_vm.timeAttr),callback:function ($$v) {_vm.timeAttr=$$v},expression:\"timeAttr\"}},[_vm._l((_vm.headers),function(attr,i){return [(_vm.inferTypes[i] != 'string')?_c('Option',{key:i,attrs:{\"value\":i}},[_vm._v(_vm._s(attr))]):_vm._e()]})],2),_c('p',[_vm._v(\"Value Attribute(s):\")]),_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"multiple\":\"\"},model:{value:(_vm.valueAttr),callback:function ($$v) {_vm.valueAttr=$$v},expression:\"valueAttr\"}},[_vm._l((_vm.headers),function(attr,i){return [(_vm.inferTypes[i] == 'number')?_c('Option',{key:i,attrs:{\"value\":i}},[_vm._v(_vm._s(attr))]):_vm._e()]})],2),_c('br'),_c('br'),_c('Button',{staticStyle:{\"width\":\"200px\"},attrs:{\"type\":\"primary\",\"disabled\":!_vm.headers.length},on:{\"click\":_vm.generateCharts}},[_vm._v(\"generate chart(s)\")])],1)]),_c('Card',{staticStyle:{\"margin-left\":\"20px\",\"flex-grow\":\"1\"}},[(!_vm.headers.length)?_c('div',{staticStyle:{\"min-height\":\"200px\",\"color\":\"red\"}},[_vm._v(\" Please load a dataset (.csv file) first! \"),_c('Button',{staticStyle:{\"margin\":\"0 12px\"},attrs:{\"type\":\"primary\",\"icon\":\"ios-archive\"},on:{\"click\":function($event){return _vm.eventHandler('1-1')}}},[_vm._v(\"Example Stocks(25.2M)\")]),_c('Button',{staticStyle:{\"margin\":\"0 12px\"},attrs:{\"type\":\"primary\",\"icon\":\"ios-archive\"},on:{\"click\":function($event){return _vm.eventHandler('1-2')}}},[_vm._v(\"Example Airline(10.6M)\")]),_c('Button',{staticStyle:{\"margin\":\"0 12px\"},attrs:{\"type\":\"primary\",\"icon\":\"ios-archive\"},on:{\"click\":function($event){return _vm.eventHandler('1-3')}}},[_vm._v(\"Example Weather(29.6M)\")]),_c('Button',{staticStyle:{\"margin\":\"0 12px\"},attrs:{\"type\":\"primary\",\"icon\":\"ios-archive\"},on:{\"click\":function($event){return _vm.eventHandler('1-4')}}},[_vm._v(\"Example Reading(18.5M)\")]),_c('Button',{staticStyle:{\"margin\":\"0 12px\"},attrs:{\"type\":\"primary\",\"icon\":\"ios-cloud-upload-outline\"},on:{\"click\":function($event){return _vm.eventHandler('2')}}},[_vm._v(\"Load data\")])],1):_c('div',[(!_vm.chartConfigs.length)?_c('div',{staticStyle:{\"min-height\":\"200px\",\"color\":\"red\"}},[_vm._v(\" Please use a valid configuration in left panel! \")]):_c('div',[_vm._l((_vm.chartConfigs),function(config,i){return [_c('CanvasBox',{key:config.aggregateName +\n                    '#' +\n                    config.timeName +\n                    '#' +\n                    config.valueName,attrs:{\"timeIndex\":config.timeIndex,\"valueIndex\":config.valueIndex,\"timeName\":config.timeName,\"valueName\":config.valueName,\"filter\":config.filter},on:{\"filterChange\":function($event){return _vm.handleFilterChange(i, $event)}}})]})],2)])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"row\",\"align-items\":\"center\",\"margin\":\"15px 0 15px 20px\",\"position\":\"relative\"}},[_c('canvas',{ref:\"canvas\",style:({\n      width: '1000px',\n      height: '500px',\n      cursor: _vm.cursor,\n      transform: (\"scaleY(\" + _vm.upsideDownFactor + \")\"),\n    }),attrs:{\"width\":\"1000\",\"height\":\"500\"},on:{\"mousedown\":_vm.startMouse,\"mousemove\":_vm.moveMouse,\"click\":_vm.angleConfirm}}),_c('canvas',{ref:\"canvasRawLine\",staticStyle:{\"width\":\"1000px\",\"height\":\"500px\",\"pointer-events\":\"none\",\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\"},style:({\n      transform: (\"scaleY(\" + _vm.upsideDownFactor + \")\"),\n    }),attrs:{\"width\":\"1000\",\"height\":\"500\"}}),_c('canvas',{ref:\"canvasOverlay\",staticStyle:{\"width\":\"1000px\",\"height\":\"500px\",\"pointer-events\":\"none\",\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\"},style:({\n      transform: (\"scaleY(\" + _vm.upsideDownFactor + \")\"),\n    }),attrs:{\"width\":\"1000\",\"height\":\"500\"}}),_c('div',{ref:\"axisTop\",staticStyle:{\"width\":\"1000px\",\"height\":\"30px\",\"position\":\"absolute\",\"top\":\"-30px\",\"left\":\"0\"}}),_c('div',{ref:\"axisBottom\",staticStyle:{\"width\":\"1000px\",\"height\":\"30px\",\"position\":\"absolute\",\"bottom\":\"-30px\",\"left\":\"0\"}}),_c('div',{ref:\"axisLeft\",staticStyle:{\"width\":\"30px\",\"height\":\"500px\",\"position\":\"absolute\",\"top\":\"0px\",\"left\":\"-30px\"}}),_c('div',{staticClass:\"control-panel\"},[_c('p',[_vm._v(\"Chart of \\\"\"+_vm._s(_vm.timeName)+\"\\\" - \\\"\"+_vm._s(_vm.valueName)+\"\\\"\")]),_c('Button',{attrs:{\"icon\":\"md-sync\"},on:{\"click\":_vm.resetFilter}},[_vm._v(\"reset filters\")]),_c('div',[_c('span',[_vm._v(\"Filter line strategy: \")]),_c('RadioGroup',{attrs:{\"type\":\"button\"},model:{value:(_vm.filterMode),callback:function ($$v) {_vm.filterMode=$$v},expression:\"filterMode\"}},[_c('Radio',{attrs:{\"label\":\"rect\"}},[_vm._v(\"Rectangle Range\")]),_c('Radio',{attrs:{\"label\":\"ang\"}},[_vm._v(\"Angular Range\")])],1)],1),_c('div',[_c('span',[_vm._v(\"Raw line strategy: \")]),_c('RadioGroup',{attrs:{\"type\":\"button\"},model:{value:(_vm.rawMode),callback:function ($$v) {_vm.rawMode=$$v},expression:\"rawMode\"}},[_c('Radio',{attrs:{\"label\":\"null\"}},[_vm._v(\"Null\")]),_c('Radio',{attrs:{\"label\":\"cur\"}},[_vm._v(\"Hover\")]),_c('Radio',{attrs:{\"label\":\"out\"}},[_vm._v(\"Min\")]),_c('Radio',{attrs:{\"label\":\"rep\"}},[_vm._v(\"Max\")])],1)],1),(_vm.rawMode == 'rep')?_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[_c('span',{staticStyle:{\"margin-right\":\"8px\"}},[_vm._v(\"Weight\")]),_c('Slider',{staticStyle:{\"flex-grow\":\"1\"},attrs:{\"min\":0,\"max\":1,\"step\":0.001,\"show-tip\":\"never\"},model:{value:(_vm.diverse),callback:function ($$v) {_vm.diverse=$$v},expression:\"diverse\"}}),_c('span',{staticStyle:{\"margin-left\":\"8px\"}},[_vm._v(\"Diverse\")])],1):_vm._e(),(_vm.rawMode != 'null')?_c('div',_vm._l(([0, 1, 2]),function(i){return _c('div',{key:i},[_c('span',[_c('ColorPicker',{attrs:{\"recommend\":\"\",\"alpha\":\"\"},model:{value:(_vm.colorMap[i]),callback:function ($$v) {_vm.$set(_vm.colorMap, i, $$v)},expression:\"colorMap[i]\"}})],1),_c('Poptip',{attrs:{\"trigger\":\"hover\",\"placement\":\"bottom-end\",\"width\":800,\"title\":\"Data preview\"},on:{\"on-popper-show\":function($event){_vm.previewIndex = _vm.rawLines[i]}}},[(i < _vm.rawLineNames.length)?_c('span',{staticStyle:{\"margin-left\":\"12px\"}},[_vm._v(_vm._s(_vm.rawLineNames[i]))]):_vm._e(),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('Table',{attrs:{\"columns\":_vm.headers,\"data\":_vm.previewData}})],1)])],1)}),0):_vm._e(),_c('div',[_c('span',[_vm._v(\"Color map: \")]),_c('span',[_vm._v(\"1\")]),_c('span',{staticClass:\"color-map\"}),_c('InputNumber',{attrs:{\"min\":1,\"active-change\":false},model:{value:(_vm.maxDensity),callback:function ($$v) {_vm.maxDensity=$$v},expression:\"maxDensity\"}})],1),_c('div',[_c('span',[_vm._v(\"Upside down:\")]),_c('iSwitch',{staticStyle:{\"margin-left\":\"12px\"},model:{value:(_vm.upsideDown),callback:function ($$v) {_vm.upsideDown=$$v},expression:\"upsideDown\"}})],1),_c('Button',{attrs:{\"icon\":\"md-cloud-download\",\"type\":\"primary\"},on:{\"click\":_vm.exportFig}},[_vm._v(\"export figure\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export var MAX_REPEATS_X = Infinity;\r\nexport var MAX_REPEATS_Y = Infinity;\r\nexport var binsx = 1000;\r\nexport var binsy = 500;\r\n","var __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spread = (this && this.__spread) || function () {\r\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nimport ndarray from \"ndarray\";\r\nimport tile from \"ndarray-tile\";\r\nimport unpack from \"ndarray-unpack\";\r\nimport pack from \"ndarray-pack\";\r\nexport function range(n) {\r\n    var out = new Float32Array(n);\r\n    for (var i = 0; i < n; i++) {\r\n        out[i] = i;\r\n    }\r\n    return out;\r\n}\r\nexport function rangeDup(n, multi) {\r\n    if (multi === void 0) { multi = 4; }\r\n    var out = new Float32Array(n * multi);\r\n    for (var i = 0; i < n * multi; i++) {\r\n        out[i] = Math.floor(i / multi);\r\n    }\r\n    return out;\r\n}\r\nexport function duplicate(arr, multi) {\r\n    if (multi === void 0) { multi = 4; }\r\n    var out = tile(arr, [1, multi]);\r\n    out = ndarray(out.data);\r\n    return out;\r\n}\r\nexport function makePair(arr, multi) {\r\n    if (multi === void 0) { multi = 2; }\r\n    if (arr.size <= 1)\r\n        return [];\r\n    var offset = Math.floor(multi / 2);\r\n    var out = arr;\r\n    out = tile(out, [1, multi]);\r\n    out = out.transpose(1, 0);\r\n    var tmpOut = unpack(out);\r\n    for (var i = 0; i < offset; i++) {\r\n        tmpOut[0].pop();\r\n        tmpOut[1].shift();\r\n    }\r\n    out = pack(tmpOut);\r\n    out = out.transpose(1, 0);\r\n    out = tile(out, [1, 1, 2]);\r\n    out = out.transpose(0, 2, 1);\r\n    out = unpack(out).reduce(function (p, v) { return __spread(p, v); }, []);\r\n    return out;\r\n}\r\n/**\r\n * Convert integer to float for shaders.\r\n */\r\nexport function float(i) {\r\n    if (i - Math.floor(i) > 0) {\r\n        return i;\r\n    }\r\n    return Math.floor(i) + \".0\";\r\n}\r\nexport function exportCanvas(canvas, upsideDown) {\r\n    var e_1, _a;\r\n    var exportCanvas = document.createElement(\"canvas\");\r\n    exportCanvas.width = 1000;\r\n    exportCanvas.height = 500;\r\n    var context = exportCanvas.getContext(\"2d\");\r\n    if (upsideDown) {\r\n        context.scale(1, -1);\r\n    }\r\n    try {\r\n        for (var canvas_1 = __values(canvas), canvas_1_1 = canvas_1.next(); !canvas_1_1.done; canvas_1_1 = canvas_1.next()) {\r\n            var cvs = canvas_1_1.value;\r\n            context.drawImage(cvs, 0, upsideDown ? -cvs.height : 0);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (canvas_1_1 && !canvas_1_1.done && (_a = canvas_1.return)) _a.call(canvas_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    var exportBtn = document.createElement(\"a\");\r\n    exportBtn.href = exportCanvas\r\n        .toDataURL()\r\n        .replace(/^data:image\\/[^;]*/, \"data:application/octet-stream\");\r\n    exportBtn.download = \"export.png\";\r\n    exportBtn.click();\r\n}\r\nexport function slope(array, min, max) {\r\n    return array.map(function (x) { return Math.max(min, Math.min(max, x)); });\r\n}\r\n","export default {\n  data: [],\n  aggregatedData: [],\n  headers: []\n};\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spread = (this && this.__spread) || function () {\r\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n};\r\nimport ndarray from \"ndarray\";\r\nimport regl_ from \"regl\";\r\nimport { MAX_REPEATS_X, MAX_REPEATS_Y } from \"./constants\";\r\nimport { float as f, range, slope } from \"./utils\";\r\n/**\r\n * Compute a density heatmap.\r\n * @param data The time series data as an ndarray.\r\n * @param attribute The attribute of data : [minX, maxX, minY, maxY]\r\n * @param binX Configuration for the binning along the time dimension.\r\n * @param binY Configuration for the binning along the value dimension.\r\n * @param canvas The canvas for the webgl context and for debug output.\r\n * @param gaussianKernel\r\n * @param lineWidth\r\n * @param tangentExtent\r\n * @param normalExtent\r\n * @param doNormalize\r\n * @param scaleOption\r\n */\r\nexport default function (data, attribute, binX, binY, canvas, gaussianKernel, lineWidth, tangentExtent, normalExtent, doNormalize, scaleOption) {\r\n    if (lineWidth === void 0) { lineWidth = 1; }\r\n    if (tangentExtent === void 0) { tangentExtent = 0; }\r\n    if (normalExtent === void 0) { normalExtent = 0; }\r\n    if (doNormalize === void 0) { doNormalize = 1; }\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        function colorMask(i) {\r\n            var mask = [false, false, false, false];\r\n            mask[i % 4] = true;\r\n            return mask;\r\n        }\r\n        var _a, numSeries, maxDataPoints, debugCanvas, heatmapWidth, heatmapHeight, gaussianIndexOffset, regl, maxRenderbufferSize, maxRepeatsX, maxRepeatsY, repeatsX, repeatsY, reshapedWidth, reshapedHeight, drawLine, drawFlatLine, computeBase, gaussian, sum, normalize, mergeBufferHorizontally, mergeBufferVertically, drawTexture, filterByAngles, filterByValues, findMax, calWeight, linesBuffer, gaussianBuffer, flatLinesBuffer, filterAngleBuffer, sumsBuffer, resultBuffer, preMergedBuffer, heatBuffer, maxValueBuffer, batchSize, series, finishedSeries, b, lines, row, i, valueLength, maxDensity, indexCache;\r\n        return __generator(this, function (_b) {\r\n            _a = __read([data.length, attribute[1]], 2), numSeries = _a[0], maxDataPoints = _a[1];\r\n            debugCanvas = !!canvas;\r\n            heatmapWidth = Math.floor((binX.stop - binX.start) / binX.step);\r\n            heatmapHeight = Math.floor((binY.stop - binY.start) / binY.step);\r\n            if (gaussianKernel === undefined) {\r\n                gaussianKernel = [\r\n                    [1, 2, 1],\r\n                    [2, 8, 2],\r\n                    [1, 2, 1],\r\n                ];\r\n            }\r\n            if (scaleOption === undefined) {\r\n                scaleOption = {\r\n                    xRatio: 1,\r\n                    yRatio: 1,\r\n                    xOffset: 0,\r\n                    yOffset: 0,\r\n                };\r\n            }\r\n            if (gaussianKernel.find(function (gaussianRow) { return gaussianRow.length != gaussianKernel.length; })) {\r\n                throw new Error(\"The input Gaussian kernal should be square matrix.\");\r\n            }\r\n            if (gaussianKernel.length % 2 == 0) {\r\n                throw new Error(\"The input Gaussian kernal size should be odd.\");\r\n            }\r\n            gaussianIndexOffset = Math.round((gaussianKernel.length - 1) / 2);\r\n            console.info(\"Heatmap size: \" + heatmapWidth + \"x\" + heatmapHeight);\r\n            console.info(\"GaussianKernelSize: \" + gaussianKernel.length + \"x\" + gaussianKernel.length);\r\n            regl = regl_({\r\n                canvas: canvas || document.createElement(\"canvas\"),\r\n                extensions: [\"OES_texture_float\"],\r\n                attributes: { preserveDrawingBuffer: true },\r\n            });\r\n            regl.on(\"lost\", function () {\r\n                alert(\"Out of GPU memory, charts will be destroyed!\");\r\n            });\r\n            maxRenderbufferSize = Math.min(regl.limits.maxRenderbufferSize, 4096);\r\n            maxRepeatsX = Math.floor(maxRenderbufferSize / heatmapWidth);\r\n            maxRepeatsY = Math.floor(maxRenderbufferSize / heatmapHeight);\r\n            repeatsX = Math.min(maxRepeatsX, Math.ceil(numSeries / 4 - 1e-6), MAX_REPEATS_X);\r\n            repeatsY = Math.min(maxRepeatsY, Math.ceil(numSeries / (repeatsX * 4)), MAX_REPEATS_Y);\r\n            console.info(\"Can repeat \" + maxRepeatsX + \"x\" + maxRepeatsY + \" times. Repeating \" + repeatsX + \"x\" + repeatsY + \" times.\");\r\n            reshapedWidth = heatmapWidth * repeatsX;\r\n            reshapedHeight = heatmapHeight * repeatsY;\r\n            console.info(\"Canvas size \" + reshapedWidth + \"x\" + reshapedHeight + \". Tangent Gaussian size \" + tangentExtent + \". Normal Gaussian size \" + f(normalExtent) + \". Line width \" + lineWidth + \". MaxX \" + binX.stop + \". MaxY \" + binY.stop);\r\n            drawLine = regl({\r\n                vert: \"\\n    precision mediump float;\\n      \\n    attribute float time;\\n    attribute float value;\\n  \\n    uniform float maxX;\\n    uniform float maxY;\\n    uniform float column;\\n    uniform float row;\\n  \\n    void main() {\\n      float repeatsX = \" + f(repeatsX) + \";\\n      float repeatsY = \" + f(repeatsY) + \";\\n  \\n      // time and value start at 0 so we can simplify the scaling\\n      float x = column / repeatsX + time / (maxX * repeatsX);\\n      \\n      // move up by 0.3 pixels so that the line is guaranteed to be drawn\\n      float yOffset = row / repeatsY + 0.3 / \" + f(reshapedHeight) + \";\\n      // squeeze by 0.6 pixels\\n      float squeeze = 1.0 - 0.6 / \" + f(heatmapHeight) + \";\\n      float yValue = value / (maxY * repeatsY) * squeeze;\\n      float y = yOffset + yValue;\\n  \\n      // squeeze y by 0.3 pixels so that the line is guaranteed to be drawn\\n      float yStretch = 2.0 - 0.6 / \" + f(reshapedHeight) + \";\\n  \\n      // scale to [-1, 1]\\n      gl_Position = vec4(\\n        2.0 * (x - 0.5),\\n        2.0 * (y - 0.5),\\n        0, 1);\\n    }\",\r\n                frag: \"\\n    precision mediump float;\\n    varying vec4 uv;\\n  \\n    void main() {\\n      // we will control the color with the color mask\\n      gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\\n    }\",\r\n                uniforms: {\r\n                    maxX: regl.prop(\"maxX\"),\r\n                    maxY: regl.prop(\"maxY\"),\r\n                    column: regl.prop(\"column\"),\r\n                    row: regl.prop(\"row\"),\r\n                },\r\n                attributes: {\r\n                    time: regl.prop(\"times\"),\r\n                    value: regl.prop(\"values\"),\r\n                },\r\n                colorMask: regl.prop(\"colorMask\"),\r\n                depth: { enable: false, mask: false },\r\n                count: regl.prop(\"count\"),\r\n                primitive: \"line strip\",\r\n                lineWidth: function () { return 1; },\r\n                framebuffer: regl.prop(\"out\"),\r\n            });\r\n            drawFlatLine = regl({\r\n                vert: \"\\n        precision mediump float;\\n\\n        attribute float value;\\n        attribute float time;\\n\\n        uniform float maxX;\\n        uniform float maxY;\\n        uniform float lineIdx;\\n\\n        varying float v;\\n\\n        void main() {\\n          v = value / maxY;\\n\\n          vec2 position = vec2(time / maxX, (floor(lineIdx / 4.0) + 0.5) / ceil(\" + f(data.length) + \" / 4.0));\\n\\n          // scale to [-1, 1]\\n          gl_Position = vec4(\\n            2.0 * (position.x - 0.5),\\n            2.0 * (position.y - 0.5),\\n            0, 1);\\n        }\",\r\n                frag: \"\\n        precision mediump float;\\n\\n        varying float v;\\n      \\n        void main() {\\n          gl_FragColor = vec4(v);\\n        }\",\r\n                uniforms: {\r\n                    maxX: regl.prop(\"maxX\"),\r\n                    maxY: regl.prop(\"maxY\"),\r\n                    lineIdx: regl.prop(\"lineIdx\"),\r\n                },\r\n                attributes: {\r\n                    value: regl.prop(\"values\"),\r\n                    time: regl.prop(\"times\"),\r\n                },\r\n                colorMask: regl.prop(\"colorMask\"),\r\n                // additive blending\r\n                blend: {\r\n                    enable: true,\r\n                    func: {\r\n                        srcRGB: \"one\",\r\n                        srcAlpha: 1,\r\n                        dstRGB: \"one\",\r\n                        dstAlpha: 1,\r\n                    },\r\n                    equation: {\r\n                        rgb: \"add\",\r\n                        alpha: \"add\",\r\n                    },\r\n                    color: [0, 0, 0, 0],\r\n                },\r\n                depth: { enable: false, mask: false },\r\n                count: regl.prop(\"count\"),\r\n                primitive: \"line strip\",\r\n                lineWidth: function () { return 1; },\r\n                framebuffer: regl.prop(\"flatOut\"),\r\n            });\r\n            computeBase = {\r\n                vert: \"\\n        precision mediump float;\\n      \\n        attribute vec2 position;\\n        varying vec2 uv;\\n      \\n        void main() {\\n          uv = 0.5 * (position + 1.0);\\n          gl_Position = vec4(position, 0, 1);\\n        }\",\r\n                attributes: {\r\n                    position: [-4, -4, 4, -4, 0, 4],\r\n                },\r\n                depth: { enable: false, mask: false },\r\n                count: 3,\r\n            };\r\n            gaussian = regl(__assign(__assign({}, computeBase), { frag: \"\\n      precision mediump float;\\n    \\n      uniform sampler2D buffer;\\n    \\n      varying vec2 uv;\\n    \\n      vec4 getColor(int offsetX, int offsetY) {\\n        const int canvasWidth = \" + reshapedWidth + \";\\n        const int canvasHeight = \" + reshapedHeight + \";\\n        const int sampleWidth = \" + heatmapWidth + \";\\n        const int sampleHeight = \" + heatmapHeight + \";\\n    \\n        int currentX = int(uv.x * float(canvasWidth) + 1e-1);\\n        int currentY = int(uv.y * float(canvasHeight) + 1e-1);\\n        int refX = currentX + offsetX;\\n        int refY = currentY + offsetY;\\n    \\n        if (currentX / sampleWidth == refX / sampleWidth && currentY / sampleHeight == refY / sampleHeight && refX >= 0 && refY >= 0) {\\n          vec2 offsetPixel = vec2(float(offsetX), float(offsetY)) / vec2(float(canvasWidth), float(canvasHeight));\\n          return texture2D(buffer, uv + offsetPixel);\\n        } else {\\n          return vec4(0.0, 0.0, 0.0, 0.0);\\n        }\\n      }\\n    \\n      void main() {\\n        gl_FragColor = \" + gaussianKernel\r\n                    .map(function (gaussianRow, offsetY) {\r\n                    return gaussianRow\r\n                        .map(function (kernelValue, offsetX) {\r\n                        return \"getColor(\" + (gaussianIndexOffset - offsetX) + \", \" + (offsetY -\r\n                            gaussianIndexOffset) + \") * \" + f(kernelValue);\r\n                    })\r\n                        .join(\" + \");\r\n                })\r\n                    .join(\" + \") + \";\\n      }\\n    \", uniforms: {\r\n                    buffer: regl.prop(\"buffer\"),\r\n                }, framebuffer: regl.prop(\"out\") }));\r\n            sum = regl(__assign(__assign({}, computeBase), { frag: \"\\n        precision mediump float;\\n      \\n        uniform sampler2D buffer;\\n        varying vec2 uv;\\n      \\n        void main() {\\n          float texelRowStart = floor(uv.y * \" + f(repeatsY) + \") / \" + f(repeatsY) + \";\\n          float texelColumnStart = floor(uv.x * \" + f(repeatsX) + \") / \" + f(repeatsX) + \";\\n      \\n          \" + (doNormalize !== 2\r\n                    ? \"\\n          // normalize by the column\\n          vec4 sum = vec4(0.0);\\n          for (float j = 0.0; j < \" + f(heatmapHeight) + \"; j++) {\\n            float texelRow = texelRowStart + (j + 0.5) / \" + f(reshapedHeight) + \";\\n            vec4 value = texture2D(buffer, vec2(uv.x, texelRow));\\n            sum += value;\\n          }\\n          \"\r\n                    : \"\\n          // normalize by the column\\n          vec4 sum = vec4(0.0);\\n          for ( float i = 0.0; i< \" + f(heatmapWidth) + \"; i++) {\\n            float texelColumn = texelColumnStart + (i + 0.5) / \" + f(reshapedWidth) + \";\\n            for (float j = 0.0; j < \" + f(heatmapHeight) + \"; j++) {\\n              float texelRow = texelRowStart + (j + 0.5) / \" + f(reshapedHeight) + \";\\n              vec4 value = texture2D(buffer, vec2(texelColumn, texelRow));\\n              sum += value;\\n            }\\n          }\\n          \\n          \") + \"\\n      \\n          // sum should be at least 1, prevents problems with empty buffers\\n          gl_FragColor = max(vec4(1.0), sum);\\n        }\", uniforms: {\r\n                    buffer: regl.prop(\"buffer\"),\r\n                }, framebuffer: regl.prop(\"out\") }));\r\n            normalize = regl(__assign(__assign({}, computeBase), { frag: \"\\n        precision mediump float;\\n      \\n        uniform sampler2D buffer;\\n        uniform sampler2D sums;\\n        varying vec2 uv;\\n      \\n        void main() {\\n          vec4 value = texture2D(buffer, uv);\\n          vec4 sum = texture2D(sums, uv);\\n      \\n          \" + (doNormalize\r\n                    ? \"gl_FragColor = value / sum;\"\r\n                    : \"gl_FragColor = value;\") + \"\\n        }\", uniforms: {\r\n                    sums: regl.prop(\"sums\"),\r\n                    buffer: regl.prop(\"buffer\"),\r\n                }, \r\n                // additive blending\r\n                blend: {\r\n                    enable: true,\r\n                    func: {\r\n                        srcRGB: \"one\",\r\n                        srcAlpha: 1,\r\n                        dstRGB: \"one\",\r\n                        dstAlpha: 1,\r\n                    },\r\n                    equation: {\r\n                        rgb: \"add\",\r\n                        alpha: \"add\",\r\n                    },\r\n                    color: [0, 0, 0, 0],\r\n                }, framebuffer: regl.prop(\"out\") }));\r\n            mergeBufferHorizontally = regl(__assign(__assign({}, computeBase), { frag: \"\\n        precision mediump float;\\n      \\n        uniform sampler2D buffer;\\n      \\n        varying vec2 uv;\\n      \\n        void main() {\\n          vec4 color = vec4(0);\\n      \\n          // collect all columns\\n          for (float i = 0.0; i < \" + f(repeatsX) + \"; i++) {\\n            float x = (i + uv.x) / \" + f(repeatsX) + \";\\n            color += texture2D(buffer, vec2(x, uv.y));\\n          }\\n      \\n          gl_FragColor = color;\\n        }\", uniforms: {\r\n                    buffer: regl.prop(\"buffer\"),\r\n                }, framebuffer: regl.prop(\"out\") }));\r\n            mergeBufferVertically = regl(__assign(__assign({}, computeBase), { frag: \"\\n        precision mediump float;\\n      \\n        uniform sampler2D buffer;\\n      \\n        varying vec2 uv;\\n      \\n        void main() {\\n          vec4 color = vec4(0);\\n      \\n          // collect all rows\\n          for (float i = 0.0; i < \" + f(repeatsY) + \"; i++) {\\n            float y = (i + uv.y) / \" + f(repeatsY) + \";\\n            color += texture2D(buffer, vec2(uv.x, y));\\n          }\\n      \\n          float value = color.r + color.g + color.b + color.a;\\n          gl_FragColor = vec4(vec3(value), 1.0);\\n        }\", uniforms: {\r\n                    buffer: regl.prop(\"buffer\"),\r\n                }, framebuffer: regl.prop(\"out\") }));\r\n            drawTexture = regl(__assign(__assign({}, computeBase), { frag: \"\\n        precision mediump float;\\n      \\n        uniform sampler2D buffer;\\n        uniform float plasma[33];\\n        uniform float maxi;\\n        \\n        varying vec2 uv;\\n        \\n        void main() {\\n          // get r and draw it\\n          float value = texture2D(buffer, uv).r;\\n\\n          if (value <= 0.01) {\\n            gl_FragColor = vec4(0);\\n          } else {\\n            float normValue = value / maxi;\\n            float step = 1.0 / 10.0;\\n            for (int i = 0; i < 10; i++) {\\n              if (normValue <= float(i + 1) * step) {\\n                float rangeValue = (normValue - float(i) * step) * 10.0;\\n                vec3 aColor = vec3(plasma[i * 3 + 0], plasma[i * 3 + 1], plasma[i * 3 + 2]);\\n                vec3 bColor = vec3(plasma[(i + 1) * 3 + 0], plasma[(i + 1) * 3 + 1], plasma[(i + 1) * 3 + 2]);\\n                gl_FragColor = vec4(aColor * (1.0 - rangeValue) + bColor * rangeValue, 1.0);\\n                return;\\n              }\\n            }\\n            gl_FragColor = vec4(plasma[30], plasma[31], plasma[32], 1);\\n          }\\n        }\", uniforms: __assign({ buffer: regl.prop(\"buffer\"), maxi: regl.prop(\"maxi\") }, [\r\n                    [0.9882352941176471, 0.9921568627450981, 0.7490196078431373],\r\n                    [0.996078431372549, 0.807843137254902, 0.5686274509803921],\r\n                    [0.996078431372549, 0.6235294117647059, 0.42745098039215684],\r\n                    [0.9686274509803922, 0.43529411764705883, 0.3607843137254902],\r\n                    [0.8705882352941177, 0.28627450980392155, 0.40784313725490196],\r\n                    [0.7137254901960784, 0.21568627450980393, 0.47843137254901963],\r\n                    [0.5490196078431373, 0.1607843137254902, 0.5058823529411764],\r\n                    [0.396078431372549, 0.10196078431372549, 0.5019607843137255],\r\n                    [0.23137254901960785, 0.058823529411764705, 0.4392156862745098],\r\n                    [0.08235294117647059, 0.054901960784313725, 0.21568627450980393],\r\n                    [0, 0, 0.01568627450980392],\r\n                ]\r\n                    // ...[\r\n                    //   [0.9411764705882353, 0.9764705882352941, 0.12941176470588237],\r\n                    //   [0.9882352941176471, 0.807843137254902, 0.1450980392156863],\r\n                    //   [0.9882352941176471, 0.6509803921568628, 0.21176470588235294],\r\n                    //   [0.9490196078431372, 0.5137254901960784, 0.2980392156862745],\r\n                    //   [0.8823529411764706, 0.39215686274509803, 0.3843137254901961],\r\n                    //   [0.796078431372549, 0.2784313725490196, 0.4745098039215686],\r\n                    //   [0.6941176470588235, 0.16470588235294117, 0.5647058823529412],\r\n                    //   [0.5647058823529412, 0.050980392156862744, 0.6431372549019608],\r\n                    //   [0.41568627450980394, 0, 0.6588235294117647],\r\n                    //   [0.25882352941176473, 0.011764705882352941, 0.615686274509804],\r\n                    //   [0.050980392156862744, 0.03137254901960784, 0.5294117647058824],\r\n                    // ]\r\n                    .reduce(function (p, v) { return __spread(p, v); }, [])\r\n                    .reduce(function (p, v, i) {\r\n                    var _a;\r\n                    return __assign(__assign({}, p), (_a = {}, _a[\"plasma[\" + i + \"]\"] = v, _a));\r\n                }, {})) }));\r\n            filterByAngles = regl(__assign(__assign({}, computeBase), { frag: \"\\n        precision mediump float;\\n      \\n        uniform sampler2D buffer;\\n        uniform float startTime;\\n        uniform float endTime;\\n        uniform float startAngle;\\n        uniform float endAngle;\\n        \\n        varying vec2 uv;\\n        \\n        void main() {\\n          // get r and draw it\\n          float width = \" + f(heatmapWidth) + \";\\n          float height = \" + f(heatmapHeight) + \";\\n          float start = startTime * width;\\n          float end = endTime * width;\\n          vec4 result = vec4(1);\\n          vec4 valid = vec4(0);\\n          for (float pointer = 0.0;pointer<=\" + f(heatmapWidth) + \";pointer++){\\n            if (pointer >= start && pointer <= end){\\n              vec4 angle = texture2D(buffer, vec2((pointer + 0.5) / width, uv.y));\\n              for (float pointer2 = 0.0;pointer2<=\" + f(heatmapWidth) + \";pointer2++){\\n                if (pointer2 > pointer && pointer2 <= end){\\n                  vec4 angle2 = texture2D(buffer, vec2((pointer2 + 0.5) / width, uv.y));\\n                  float diff = 0.0;\\n                  \" + [0, 1, 2, 3]\r\n                    .map(function (i) { return \"\\n                  if(angle2[\" + i + \"] > 0.0) {\\n                    valid[\" + i + \"] = 1.0;\\n                  }\\n                  diff = (angle2[\" + i + \"] - angle[\" + i + \"]) * 500.0 / (pointer2 - pointer) * width / 1000.0;\\n                  if (diff < startAngle || diff > endAngle) {\\n                    result[\" + i + \"] = 0.0;\\n                  }\\n                  \"; })\r\n                    .join(\"\") + \"\\n                }\\n              }\\n            }\\n          }\\n          \" + [0, 1, 2, 3]\r\n                    .map(function (i) { return \"\\n          if(valid[\" + i + \"] <= 0.0) {\\n            result[\" + i + \"] = 0.0;\\n          }\\n          \"; })\r\n                    .join(\"\") + \"\\n          gl_FragColor = result;\\n        }\", uniforms: {\r\n                    buffer: regl.prop(\"buffer\"),\r\n                    startTime: regl.prop(\"startTime\"),\r\n                    endTime: regl.prop(\"endTime\"),\r\n                    startAngle: regl.prop(\"startAngle\"),\r\n                    endAngle: regl.prop(\"endAngle\"),\r\n                }, framebuffer: regl.prop(\"out\") }));\r\n            filterByValues = regl(__assign(__assign({}, computeBase), { frag: \"\\n        precision mediump float;\\n      \\n        uniform sampler2D buffer;\\n        uniform float startTime;\\n        uniform float endTime;\\n        uniform float startValue;\\n        uniform float endValue;\\n        \\n        varying vec2 uv;\\n        \\n        void main() {\\n          // get r and draw it\\n          float width = \" + f(heatmapWidth) + \";\\n          float start = startTime * width;\\n          float end = endTime * width;\\n          vec4 result = vec4(0);\\n          for (float pointer = 0.0;pointer<=\" + f(heatmapWidth) + \";pointer++){\\n            if (pointer >= start && pointer <= end){\\n              vec4 angle = texture2D(buffer, vec2((pointer + 0.5) / width, uv.y));\\n              \" + [0, 1, 2, 3]\r\n                    .map(function (i) { return \"\\n              if (angle[\" + i + \"] >= startValue && angle[\" + i + \"] <= endValue) {\\n                result[\" + i + \"] = 1.0;\\n              }\\n              \"; })\r\n                    .join(\"\") + \"\\n            }\\n          }\\n          gl_FragColor = result;\\n        }\", uniforms: {\r\n                    buffer: regl.prop(\"buffer\"),\r\n                    startTime: regl.prop(\"startTime\"),\r\n                    endTime: regl.prop(\"endTime\"),\r\n                    startValue: regl.prop(\"startValue\"),\r\n                    endValue: regl.prop(\"endValue\"),\r\n                }, framebuffer: regl.prop(\"out\") }));\r\n            findMax = regl(__assign(__assign({}, computeBase), { frag: \"\\n        precision mediump float;\\n      \\n        uniform sampler2D buffer;\\n        \\n        varying vec2 uv;\\n        \\n        void main() {\\n          float width = \" + f(heatmapWidth) + \";\\n          float height = \" + f(heatmapHeight) + \";\\n          vec4 result = vec4(0);\\n          for (float x = 0.0;x<=\" + f(heatmapWidth) + \";x++){\\n            for (float y = 0.0;y<=\" + f(heatmapHeight) + \";y++){\\n              result = max(result, texture2D(buffer, vec2(x / width, y / height)));\\n            }\\n          }\\n          gl_FragColor = result;\\n        }\", uniforms: {\r\n                    buffer: regl.prop(\"buffer\"),\r\n                }, framebuffer: regl.prop(\"out\") }));\r\n            calWeight = regl(__assign(__assign({}, computeBase), { frag: \"\\n    precision mediump float;\\n      \\n    uniform sampler2D buffer;\\n    uniform sampler2D heat;\\n    \\n    varying vec2 uv;\\n    \\n    void main() {\\n      float width = \" + f(heatmapWidth) + \";\\n      float height = \" + f(heatmapHeight) + \";\\n      vec4 sum = vec4(0);\\n      for (float i = 0.0; i< \" + f(heatmapWidth) + \";i++){\\n        vec4 pointer = texture2D(buffer, vec2(i / width, uv.y));\\n        \" + [0, 1, 2, 3]\r\n                    .map(function (i) { return \"\\n        sum[\" + i + \"] += texture2D(heat, vec2(i / width, pointer[\" + i + \"])).x;\\n        \"; })\r\n                    .join(\"\") + \"\\n      }\\n      gl_FragColor = sum;\\n    }\\n    \", uniforms: {\r\n                    buffer: regl.prop(\"buffer\"),\r\n                    heat: regl.prop(\"heat\"),\r\n                }, framebuffer: regl.prop(\"out\") }));\r\n            console.time(\"Allocate buffers\");\r\n            linesBuffer = regl.framebuffer({\r\n                width: reshapedWidth,\r\n                height: reshapedHeight,\r\n                colorFormat: \"rgba\",\r\n                colorType: \"uint8\",\r\n            });\r\n            gaussianBuffer = regl.framebuffer({\r\n                width: reshapedWidth,\r\n                height: reshapedHeight,\r\n                colorFormat: \"rgba\",\r\n                colorType: \"float\",\r\n            });\r\n            flatLinesBuffer = regl.framebuffer({\r\n                width: heatmapWidth,\r\n                height: Math.ceil(data.length / 4),\r\n                colorFormat: \"rgba\",\r\n                colorType: \"float\",\r\n            });\r\n            filterAngleBuffer = regl.framebuffer({\r\n                width: 1,\r\n                height: Math.ceil(data.length / 4),\r\n                colorFormat: \"rgba\",\r\n                colorType: \"float\",\r\n            });\r\n            sumsBuffer = regl.framebuffer({\r\n                width: reshapedWidth,\r\n                height: repeatsY,\r\n                colorFormat: \"rgba\",\r\n                colorType: \"float\",\r\n            });\r\n            resultBuffer = regl.framebuffer({\r\n                width: reshapedWidth,\r\n                height: reshapedHeight,\r\n                colorFormat: \"rgba\",\r\n                colorType: \"float\",\r\n            });\r\n            preMergedBuffer = regl.framebuffer({\r\n                width: heatmapWidth,\r\n                height: reshapedHeight,\r\n                colorFormat: \"rgba\",\r\n                colorType: \"float\",\r\n            });\r\n            heatBuffer = regl.framebuffer({\r\n                width: heatmapWidth,\r\n                height: heatmapHeight,\r\n                colorFormat: \"rgba\",\r\n                colorType: \"float\",\r\n            });\r\n            maxValueBuffer = regl.framebuffer({\r\n                width: 1,\r\n                height: 1,\r\n                colorFormat: \"rgba\",\r\n                colorType: \"float\",\r\n            });\r\n            console.timeEnd(\"Allocate buffers\");\r\n            console.time(\"Compute heatmap\");\r\n            batchSize = 4 * repeatsX * repeatsY;\r\n            series = 0;\r\n            finishedSeries = 0;\r\n            regl.clear({\r\n                color: [0, 0, 0, 0],\r\n                framebuffer: flatLinesBuffer,\r\n            });\r\n            for (b = 0; b < numSeries; b += batchSize) {\r\n                console.time(\"Prepare Batch\");\r\n                lines = new Array(Math.min(batchSize, numSeries - series));\r\n                // clear the lines buffer before the next batch\r\n                regl.clear({\r\n                    color: [0, 0, 0, 0],\r\n                    framebuffer: linesBuffer,\r\n                });\r\n                loop: for (row = 0; row < repeatsY; row++) {\r\n                    for (i = 0; i < 4 * repeatsX; i++) {\r\n                        if (series >= numSeries) {\r\n                            break loop;\r\n                        }\r\n                        valueLength = data[series].xValues.length;\r\n                        lines[series - finishedSeries] = {\r\n                            values: ndarray(data[series].yValues),\r\n                            times: ndarray(data[series].xValues),\r\n                            maxY: binY.stop,\r\n                            maxX: maxDataPoints,\r\n                            lineIdx: series,\r\n                            column: Math.floor(i / 4),\r\n                            row: row,\r\n                            colorMask: colorMask(i),\r\n                            count: valueLength,\r\n                            out: linesBuffer,\r\n                            flatOut: flatLinesBuffer,\r\n                        };\r\n                        series++;\r\n                    }\r\n                }\r\n                console.timeEnd(\"Prepare Batch\");\r\n                console.info(\"Drawing \" + lines.length + \" lines.\");\r\n                console.time(\"regl: drawFlatLine\");\r\n                drawFlatLine(lines);\r\n                console.timeEnd(\"regl: drawFlatLine\");\r\n                console.time(\"regl: drawLine\");\r\n                drawLine(lines);\r\n                console.timeEnd(\"regl: drawLine\");\r\n                console.time(\"regl: gaussian\");\r\n                gaussian({\r\n                    buffer: linesBuffer,\r\n                    out: gaussianBuffer,\r\n                });\r\n                console.timeEnd(\"regl: gaussian\");\r\n                finishedSeries += lines.length;\r\n                console.time(\"regl: sum\");\r\n                sum({\r\n                    buffer: gaussianBuffer,\r\n                    out: sumsBuffer,\r\n                });\r\n                console.timeEnd(\"regl: sum\");\r\n                console.time(\"regl: normalize\");\r\n                normalize({\r\n                    buffer: gaussianBuffer,\r\n                    sums: sumsBuffer,\r\n                    out: resultBuffer,\r\n                });\r\n                console.timeEnd(\"regl: normalize\");\r\n            }\r\n            console.time(\"regl: merge\");\r\n            mergeBufferHorizontally({\r\n                buffer: resultBuffer,\r\n                out: preMergedBuffer,\r\n            });\r\n            mergeBufferVertically({\r\n                buffer: preMergedBuffer,\r\n                out: heatBuffer,\r\n            });\r\n            console.timeEnd(\"regl: merge\");\r\n            console.timeEnd(\"Compute heatmap\");\r\n            console.time(\"regl: findMax\");\r\n            findMax({\r\n                buffer: heatBuffer,\r\n                out: maxValueBuffer,\r\n            });\r\n            maxDensity = Math.ceil(regl.read({ framebuffer: maxValueBuffer })[0]);\r\n            console.timeEnd(\"regl: findMax\");\r\n            console.log(\"max density is:\", maxDensity);\r\n            drawTexture({\r\n                buffer: heatBuffer,\r\n                maxi: maxDensity,\r\n            });\r\n            indexCache = range(data.length);\r\n            return [2 /*return*/, {\r\n                    filterAngle: function (startTime, endTime, startAngle, endAngle) {\r\n                        var _a, _b;\r\n                        console.time(\"compute angle range\");\r\n                        _a = __read(slope([startTime, endTime], 0, 1), 2), startTime = _a[0], endTime = _a[1];\r\n                        _b = __read(slope([startAngle, endAngle], -90, 90), 2), startAngle = _b[0], endAngle = _b[1];\r\n                        filterByAngles({\r\n                            buffer: flatLinesBuffer,\r\n                            out: filterAngleBuffer,\r\n                            startTime: startTime,\r\n                            endTime: endTime,\r\n                            startAngle: startAngle,\r\n                            endAngle: endAngle,\r\n                        });\r\n                        var filterResult = regl.read({ framebuffer: filterAngleBuffer });\r\n                        console.timeEnd(\"compute angle range\");\r\n                        return new Float32Array(filterResult)\r\n                            .map(function (x, i) { return (x ? i + 1 : 0); })\r\n                            .filter(function (x) { return x; })\r\n                            .map(function (x) { return x - 1; });\r\n                    },\r\n                    filterRange: function (startTime, endTime, startValue, endValue) {\r\n                        var _a;\r\n                        console.time(\"compute rect range\");\r\n                        _a = __read(slope([startTime, endTime, startValue, endValue], 0, 1), 4), startTime = _a[0], endTime = _a[1], startValue = _a[2], endValue = _a[3];\r\n                        filterByValues({\r\n                            buffer: flatLinesBuffer,\r\n                            out: filterAngleBuffer,\r\n                            startTime: startTime,\r\n                            endTime: endTime,\r\n                            startValue: startValue,\r\n                            endValue: endValue,\r\n                        });\r\n                        var filterResult = regl.read({ framebuffer: filterAngleBuffer });\r\n                        console.timeEnd(\"compute rect range\");\r\n                        return new Float32Array(filterResult)\r\n                            .map(function (x, i) { return (x ? i + 1 : 0); })\r\n                            .filter(function (x) { return x; })\r\n                            .map(function (x) { return x - 1; });\r\n                    },\r\n                    findKTop: function (isHighest, diverse) {\r\n                        console.time(\"find-top\");\r\n                        console.time(\"regl: calWeight\");\r\n                        calWeight({\r\n                            buffer: flatLinesBuffer,\r\n                            heat: heatBuffer,\r\n                            out: filterAngleBuffer,\r\n                        });\r\n                        var weights = __spread(regl.read({ framebuffer: filterAngleBuffer })).map(function (w, i) {\r\n                            if (!data[i])\r\n                                return { w: 0, i: i };\r\n                            return { w: w, i: i };\r\n                        })\r\n                            .filter(function (o) { return indexCache.includes(o.i); })\r\n                            .sort(function (a, b) { return (isHighest ? b.w - a.w : a.w - b.w); });\r\n                        console.timeEnd(\"regl: calWeight\");\r\n                        if (isHighest && diverse) {\r\n                            var diversityList = [];\r\n                            for (var i = 0; diversityList.length < 3 && i < weights.length; i++) {\r\n                                var flag = true;\r\n                                var _loop_1 = function (j) {\r\n                                    var insertLine = data[weights[i].i];\r\n                                    var testLine = data[diversityList[j]];\r\n                                    var testLength = Math.min(insertLine.xValues.length, testLine.xValues.length);\r\n                                    var subArr = insertLine.yValues\r\n                                        .slice(insertLine.yValues.length - testLength)\r\n                                        .map(function (v, i) {\r\n                                        return (v -\r\n                                            testLine.yValues[testLine.yValues.length - testLength + i]) /\r\n                                            binY.stop;\r\n                                    });\r\n                                    if (standardDeviation(subArr) < diverse) {\r\n                                        flag = false;\r\n                                        return \"break\";\r\n                                    }\r\n                                };\r\n                                for (var j = 0; j < diversityList.length; j++) {\r\n                                    var state_1 = _loop_1(j);\r\n                                    if (state_1 === \"break\")\r\n                                        break;\r\n                                }\r\n                                if (flag) {\r\n                                    diversityList.push(weights[i].i);\r\n                                }\r\n                            }\r\n                            console.timeEnd(\"find-top\");\r\n                            return diversityList;\r\n                        }\r\n                        else {\r\n                            console.timeEnd(\"find-top\");\r\n                            return weights.slice(0, 3).map(function (o) { return o.i; });\r\n                        }\r\n                    },\r\n                    rerender: function (indexes) {\r\n                        if (!indexes) {\r\n                            indexes = range(data.length);\r\n                        }\r\n                        indexCache = indexes;\r\n                        console.time(\"Compute heatmap\");\r\n                        // batches of 4 * repeats\r\n                        var batchSize = 4 * repeatsX * repeatsY;\r\n                        // index of series\r\n                        var series = 0;\r\n                        // how many series have already been drawn\r\n                        var finishedSeries = 0;\r\n                        regl.clear({\r\n                            color: [0, 0, 0, 0],\r\n                            framebuffer: resultBuffer,\r\n                        });\r\n                        for (var b = 0; b < indexes.length; b += batchSize) {\r\n                            console.time(\"Prepare Batch\");\r\n                            // array to hold the lines that should be rendered\r\n                            var lines = new Array(Math.min(batchSize, indexes.length - series));\r\n                            // clear the lines buffer before the next batch\r\n                            regl.clear({\r\n                                color: [0, 0, 0, 0],\r\n                                framebuffer: linesBuffer,\r\n                            });\r\n                            loop2: for (var row = 0; row < repeatsY; row++) {\r\n                                for (var i = 0; i < 4 * repeatsX; i++) {\r\n                                    if (series >= indexes.length) {\r\n                                        break loop2;\r\n                                    }\r\n                                    // console.log(series, Math.floor(i / 4), row);\r\n                                    var valueLength = data[indexes[series]].xValues.length;\r\n                                    lines[series - finishedSeries] = {\r\n                                        values: ndarray(data[indexes[series]].yValues),\r\n                                        times: ndarray(data[indexes[series]].xValues),\r\n                                        maxY: binY.stop,\r\n                                        maxX: maxDataPoints,\r\n                                        column: Math.floor(i / 4),\r\n                                        row: row,\r\n                                        colorMask: colorMask(i),\r\n                                        count: valueLength,\r\n                                        out: linesBuffer,\r\n                                    };\r\n                                    series++;\r\n                                }\r\n                            }\r\n                            console.timeEnd(\"Prepare Batch\");\r\n                            console.info(\"Drawing \" + lines.length + \" lines.\");\r\n                            console.time(\"regl: drawLine\");\r\n                            drawLine(lines);\r\n                            console.timeEnd(\"regl: drawLine\");\r\n                            console.time(\"regl: gaussian\");\r\n                            gaussian({\r\n                                buffer: linesBuffer,\r\n                                out: gaussianBuffer,\r\n                            });\r\n                            console.timeEnd(\"regl: gaussian\");\r\n                            finishedSeries += lines.length;\r\n                            console.time(\"regl: sum\");\r\n                            sum({\r\n                                buffer: gaussianBuffer,\r\n                                out: sumsBuffer,\r\n                            });\r\n                            console.timeEnd(\"regl: sum\");\r\n                            console.time(\"regl: normalize\");\r\n                            normalize({\r\n                                buffer: gaussianBuffer,\r\n                                sums: sumsBuffer,\r\n                                out: resultBuffer,\r\n                            });\r\n                            console.timeEnd(\"regl: normalize\");\r\n                        }\r\n                        console.time(\"regl: merge\");\r\n                        mergeBufferHorizontally({\r\n                            buffer: resultBuffer,\r\n                            out: preMergedBuffer,\r\n                        });\r\n                        mergeBufferVertically({\r\n                            buffer: preMergedBuffer,\r\n                            out: heatBuffer,\r\n                        });\r\n                        console.timeEnd(\"regl: merge\");\r\n                        console.timeEnd(\"Compute heatmap\");\r\n                        drawTexture({\r\n                            buffer: heatBuffer,\r\n                            maxi: maxDensity,\r\n                        });\r\n                    },\r\n                    destroy: function () {\r\n                        regl.destroy();\r\n                    },\r\n                    get maxDensity() {\r\n                        return maxDensity;\r\n                    },\r\n                    set maxDensity(v) {\r\n                        if (maxDensity == v || v < 1)\r\n                            return;\r\n                        maxDensity = v;\r\n                        drawTexture({\r\n                            buffer: heatBuffer,\r\n                            maxi: maxDensity,\r\n                        });\r\n                    },\r\n                    maxX: binX.stop,\r\n                    maxY: binY.stop,\r\n                }];\r\n        });\r\n    });\r\n}\r\nfunction standardDeviation(values) {\r\n    var avg = average(values);\r\n    var squareDiffs = values.map(function (value) {\r\n        var diff = value - avg;\r\n        var sqrDiff = diff * diff;\r\n        return sqrDiff;\r\n    });\r\n    var avgSquareDiff = average(squareDiffs);\r\n    var stdDev = Math.sqrt(avgSquareDiff);\r\n    return stdDev;\r\n}\r\nfunction average(data) {\r\n    var sum = data.reduce(function (sum, value) {\r\n        return sum + value;\r\n    }, 0);\r\n    var avg = sum / data.length;\r\n    return avg;\r\n}\r\n","<template>\r\n  <div\r\n    style=\"display:flex;flex-direction:row;align-items:center;margin:15px 0 15px 20px;position:relative\"\r\n  >\r\n    <canvas\r\n      ref=\"canvas\"\r\n      width=\"1000\"\r\n      height=\"500\"\r\n      :style=\"{\r\n        width: '1000px',\r\n        height: '500px',\r\n        cursor,\r\n        transform: `scaleY(${upsideDownFactor})`,\r\n      }\"\r\n      @mousedown=\"startMouse\"\r\n      @mousemove=\"moveMouse\"\r\n      @click=\"angleConfirm\"\r\n    ></canvas>\r\n    <canvas\r\n      ref=\"canvasRawLine\"\r\n      width=\"1000\"\r\n      height=\"500\"\r\n      style=\"width:1000px;height:500px;pointer-events:none;position:absolute;top:0;left:0\"\r\n      :style=\"{\r\n        transform: `scaleY(${upsideDownFactor})`,\r\n      }\"\r\n    ></canvas>\r\n    <canvas\r\n      ref=\"canvasOverlay\"\r\n      width=\"1000\"\r\n      height=\"500\"\r\n      style=\"width:1000px;height:500px;pointer-events:none;position:absolute;top:0;left:0\"\r\n      :style=\"{\r\n        transform: `scaleY(${upsideDownFactor})`,\r\n      }\"\r\n    ></canvas>\r\n    <div\r\n      ref=\"axisTop\"\r\n      style=\"width:1000px;height:30px;position:absolute;top:-30px;left:0\"\r\n    ></div>\r\n    <div\r\n      ref=\"axisBottom\"\r\n      style=\"width:1000px;height:30px;position:absolute;bottom:-30px;left:0\"\r\n    ></div>\r\n    <div\r\n      ref=\"axisLeft\"\r\n      style=\"width:30px;height:500px;position:absolute;top:0px;left:-30px\"\r\n    ></div>\r\n    <div class=\"control-panel\">\r\n      <p>Chart of \"{{ timeName }}\" - \"{{ valueName }}\"</p>\r\n      <Button icon=\"md-sync\" @click=\"resetFilter\">reset filters</Button>\r\n      <div>\r\n        <span>Filter line strategy: </span>\r\n        <RadioGroup v-model=\"filterMode\" type=\"button\">\r\n          <Radio label=\"rect\">Rectangle Range</Radio>\r\n          <Radio label=\"ang\">Angular Range</Radio>\r\n        </RadioGroup>\r\n      </div>\r\n      <div>\r\n        <span>Raw line strategy: </span>\r\n        <RadioGroup v-model=\"rawMode\" type=\"button\">\r\n          <Radio label=\"null\">Null</Radio>\r\n          <Radio label=\"cur\">Hover</Radio>\r\n          <Radio label=\"out\">Min</Radio>\r\n          <Radio label=\"rep\">Max</Radio>\r\n        </RadioGroup>\r\n      </div>\r\n      <div v-if=\"rawMode == 'rep'\" style=\"display:flex;align-items:center\">\r\n        <span style=\"margin-right:8px\">Weight</span>\r\n        <Slider\r\n          v-model=\"diverse\"\r\n          :min=\"0\"\r\n          :max=\"1\"\r\n          :step=\"0.001\"\r\n          show-tip=\"never\"\r\n          style=\"flex-grow:1\"\r\n        />\r\n        <span style=\"margin-left:8px\">Diverse</span>\r\n      </div>\r\n      <div v-if=\"rawMode != 'null'\">\r\n        <div v-for=\"i in [0, 1, 2]\" :key=\"i\">\r\n          <span\r\n            ><ColorPicker v-model=\"colorMap[i]\" recommend alpha></ColorPicker\r\n          ></span>\r\n          <Poptip\r\n            trigger=\"hover\"\r\n            placement=\"bottom-end\"\r\n            :width=\"800\"\r\n            title=\"Data preview\"\r\n            @on-popper-show=\"previewIndex = rawLines[i]\"\r\n          >\r\n            <span style=\"margin-left:12px\" v-if=\"i < rawLineNames.length\">{{\r\n              rawLineNames[i]\r\n            }}</span>\r\n            <div slot=\"content\">\r\n              <Table :columns=\"headers\" :data=\"previewData\" />\r\n            </div>\r\n          </Poptip>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <span>Color map: </span>\r\n        <span>1</span>\r\n        <span class=\"color-map\"></span>\r\n        <InputNumber :min=\"1\" v-model=\"maxDensity\" :active-change=\"false\" />\r\n      </div>\r\n      <div>\r\n        <span>Upside down:</span>\r\n        <iSwitch style=\"margin-left:12px\" v-model=\"upsideDown\" />\r\n      </div>\r\n      <Button icon=\"md-cloud-download\" type=\"primary\" @click=\"exportFig\"\r\n        >export figure</Button\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { binsx, binsy } from \"../core/constants\";\r\nimport { exportCanvas } from \"../core/utils\";\r\nimport { bin } from \"vega-statistics\";\r\nimport unobserve from \"../store\";\r\nimport render from \"../core\";\r\nimport * as d3 from \"d3\";\r\n\r\nexport default {\r\n  props: {\r\n    timeIndex: Number,\r\n    valueIndex: Number,\r\n    timeName: String,\r\n    valueName: String,\r\n    filter: Float32Array,\r\n  },\r\n  data() {\r\n    return {\r\n      canvas: null,\r\n      contextHandler: null,\r\n      canvasContext: null,\r\n      rawLineContext: null,\r\n      filterMode: \"rect\",\r\n      rawMode: \"null\",\r\n      diverse: 0.15,\r\n      cursor: \"crosshair\",\r\n      mouseDown: false,\r\n      listener: null,\r\n      hoverListener: null,\r\n      coord: [0, 0, 0, 0, 0],\r\n      boxes: [],\r\n      maxDensity: 1,\r\n      rawLines: [],\r\n      colorMap: [\"aqua\", \"limegreen\", \"lightgreen\"],\r\n      upsideDown: false,\r\n      headers: [],\r\n      previewIndex: -1,\r\n    };\r\n  },\r\n  computed: {\r\n    rawLineNames() {\r\n      return [...this.rawLines].map((i) => unobserve.aggregatedData[i].key);\r\n    },\r\n    upsideDownFactor() {\r\n      return this.upsideDown ? -1 : 1;\r\n    },\r\n    previewData() {\r\n      if (this.previewIndex < 0) return [];\r\n      return [...unobserve.aggregatedData[this.previewIndex].ref]\r\n        .slice(0, 6)\r\n        .map((i, ii) =>\r\n          ii == 5 ? this.headers.map((_) => \"...\") : unobserve.data[i]\r\n        );\r\n    },\r\n  },\r\n  watch: {\r\n    filter(value) {\r\n      this.contextHandler.rerender(value);\r\n      this.getTopK();\r\n    },\r\n    contextHandler() {\r\n      if (this.filter) {\r\n        this.contextHandler.rerender(this.filter);\r\n      }\r\n    },\r\n    filterMode() {\r\n      this.resetFilter();\r\n    },\r\n    rawMode() {\r\n      this.getTopK();\r\n    },\r\n    maxDensity() {\r\n      this.contextHandler.maxDensity = this.maxDensity;\r\n    },\r\n    diverse() {\r\n      this.getTopK();\r\n    },\r\n    colorMap() {\r\n      const kArray = this.rawLines;\r\n      this.rawLineContext.clearRect(0, 0, 1000, 500);\r\n      const colorMap = this.colorMap;\r\n      for (let i = 0; i < kArray.length; i++) {\r\n        const data = unobserve.aggregatedData[kArray[i]];\r\n        this.rawLineContext.globalAlpha = 1;\r\n        this.rawLineContext.strokeStyle = colorMap[i % 3];\r\n        this.rawLineContext.lineWidth = 2;\r\n        this.rawLineContext.beginPath();\r\n        this.rawLineContext.moveTo(\r\n          (data[this.timeIndex][0] / this.contextHandler.maxX) * 1000,\r\n          500 - (data[this.valueIndex][0] / this.contextHandler.maxY) * 500\r\n        );\r\n        for (let j = 0; j < data[this.timeIndex].length; j++) {\r\n          this.rawLineContext.lineTo(\r\n            (data[this.timeIndex][j] / this.contextHandler.maxX) * 1000,\r\n            500 - (data[this.valueIndex][j] / this.contextHandler.maxY) * 500\r\n          );\r\n        }\r\n        this.rawLineContext.stroke();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    hoverLines(e) {\r\n      const x = e.offsetX;\r\n      const y = e.offsetY;\r\n      const kArray = this.contextHandler\r\n        .filterRange(\r\n          (x - 5) / 1000,\r\n          (x + 5) / 1000,\r\n          1 - (y + 5) / 500,\r\n          1 - (y - 5) / 500\r\n        )\r\n        .filter((x) => !this.filter || this.filter.includes(x))\r\n        .slice(0, 3);\r\n      this.rawLineContext.clearRect(0, 0, 1000, 500);\r\n      const colorMap = this.colorMap;\r\n      for (let i = kArray.length - 1; i >= 0; i--) {\r\n        const data = unobserve.aggregatedData[kArray[i]];\r\n        this.rawLineContext.globalAlpha = 1;\r\n        this.rawLineContext.strokeStyle = colorMap[i % 3];\r\n        this.rawLineContext.lineWidth = 2;\r\n        this.rawLineContext.beginPath();\r\n        this.rawLineContext.moveTo(\r\n          (data[this.timeIndex][0] / this.contextHandler.maxX) * 1000,\r\n          500 - (data[this.valueIndex][0] / this.contextHandler.maxY) * 500\r\n        );\r\n        for (let j = 0; j < data[this.timeIndex].length; j++) {\r\n          this.rawLineContext.lineTo(\r\n            (data[this.timeIndex][j] / this.contextHandler.maxX) * 1000,\r\n            500 - (data[this.valueIndex][j] / this.contextHandler.maxY) * 500\r\n          );\r\n        }\r\n        this.rawLineContext.stroke();\r\n      }\r\n      this.rawLines = kArray;\r\n    },\r\n    getTopK() {\r\n      let kArray = [];\r\n      if (this.hoverListener) {\r\n        this.$refs.canvas.removeEventListener(\"mousemove\", this.hoverListener);\r\n      }\r\n      switch (this.rawMode) {\r\n        case \"cur\":\r\n          this.hoverListener = this.hoverLines.bind(this);\r\n          this.$refs.canvas.addEventListener(\"mousemove\", this.hoverListener);\r\n          break;\r\n        case \"out\":\r\n          kArray = this.contextHandler.findKTop(false);\r\n          break;\r\n        case \"rep\":\r\n          kArray = this.contextHandler.findKTop(true, this.diverse);\r\n          break;\r\n      }\r\n      this.rawLineContext.clearRect(0, 0, 1000, 500);\r\n      const colorMap = this.colorMap;\r\n      for (let i = kArray.length - 1; i >= 0; i--) {\r\n        const data = unobserve.aggregatedData[kArray[i]];\r\n        this.rawLineContext.globalAlpha = 1;\r\n        this.rawLineContext.strokeStyle = colorMap[i % 3];\r\n        this.rawLineContext.lineWidth = 2;\r\n        this.rawLineContext.beginPath();\r\n        this.rawLineContext.moveTo(\r\n          (data[this.timeIndex][0] / this.contextHandler.maxX) * 1000,\r\n          500 - (data[this.valueIndex][0] / this.contextHandler.maxY) * 500\r\n        );\r\n        for (let j = 0; j < data[this.timeIndex].length; j++) {\r\n          this.rawLineContext.lineTo(\r\n            (data[this.timeIndex][j] / this.contextHandler.maxX) * 1000,\r\n            500 - (data[this.valueIndex][j] / this.contextHandler.maxY) * 500\r\n          );\r\n        }\r\n        this.rawLineContext.stroke();\r\n      }\r\n      this.rawLines = kArray;\r\n    },\r\n    resetFilter() {\r\n      this.$emit(\"filterChange\", undefined);\r\n      this.boxes = [];\r\n      this.mouseDown = false;\r\n      this.canvasContext.clearRect(0, 0, 1000, 500);\r\n      this.coord = [0, 0, 0, 0, 0];\r\n    },\r\n    startMouse(e) {\r\n      if (this.mouseDown) return;\r\n      this.mouseDown = true;\r\n      let x = e.offsetX,\r\n        y = e.offsetY,\r\n        flag = false;\r\n      if (this.filterMode == \"rect\") {\r\n        x /= 1000;\r\n        y = 1 - y / 500;\r\n        for (let box of this.boxes) {\r\n          if (\r\n            (Math.abs(x - box[0]) <= 0.002 || Math.abs(x - box[1]) <= 0.002) &&\r\n            y > box[2] &&\r\n            y < box[3]\r\n          ) {\r\n            if (Math.abs(x - box[0]) <= 0.002) {\r\n              this.mouseDown = \"left\";\r\n            } else {\r\n              this.mouseDown = \"right\";\r\n            }\r\n            flag = true;\r\n          } else if (\r\n            (Math.abs(y - box[2]) <= 0.004 || Math.abs(y - box[3]) <= 0.004) &&\r\n            x > box[0] &&\r\n            x < box[1]\r\n          ) {\r\n            if (Math.abs(y - box[2]) <= 0.004) {\r\n              this.mouseDown = \"bottom\";\r\n            } else {\r\n              this.mouseDown = \"top\";\r\n            }\r\n            flag = true;\r\n          } else if (x > box[0] && x < box[1] && y > box[2] && y < box[3]) {\r\n            this.mouseDown = \"move\";\r\n            flag = true;\r\n          }\r\n          if (flag) {\r\n            this.coord = [\r\n              box[0] * 1000,\r\n              500 - box[3] * 500,\r\n              box[1] * 1000,\r\n              500 - box[2] * 500,\r\n              0,\r\n            ];\r\n            this.boxes.splice(this.boxes.indexOf(box), 1);\r\n            let filterResult = undefined;\r\n            this.boxes.forEach((b) => {\r\n              let tmpResult = this.contextHandler.filterRange(...b);\r\n              if (!filterResult) {\r\n                filterResult = tmpResult;\r\n              } else {\r\n                filterResult = filterResult.filter((x) =>\r\n                  tmpResult.includes(x)\r\n                );\r\n              }\r\n            });\r\n            this.$emit(\"filterChange\", filterResult);\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        if (\r\n          Math.abs(x - this.coord[0]) <= 2 &&\r\n          Math.abs(y - this.coord[1]) <= 2\r\n        ) {\r\n          this.mouseDown = \"move\";\r\n          flag = true;\r\n        } else if (\r\n          Math.abs(x - this.coord[2]) <= 2 &&\r\n          Math.abs(y - this.coord[3]) <= Math.abs(this.coord[4] - this.coord[3])\r\n        ) {\r\n          this.mouseDown = \"time\";\r\n          flag = true;\r\n        } else if (\r\n          x > this.coord[0] &&\r\n          x < this.coord[2] &&\r\n          y >\r\n            (this.coord[1] * (this.coord[2] - x)) /\r\n              (this.coord[2] - this.coord[0]) +\r\n              ((this.coord[3] - Math.abs(this.coord[4] - this.coord[3])) *\r\n                (x - this.coord[0])) /\r\n                (this.coord[2] - this.coord[0]) &&\r\n          y <\r\n            (this.coord[1] * (this.coord[2] - x)) /\r\n              (this.coord[2] - this.coord[0]) +\r\n              ((this.coord[3] + Math.abs(this.coord[4] - this.coord[3])) *\r\n                (x - this.coord[0])) /\r\n                (this.coord[2] - this.coord[0])\r\n        ) {\r\n          this.mouseDown = \"angular\";\r\n          flag = true;\r\n        }\r\n      }\r\n      if (!flag) {\r\n        this.coord = [0, 0, 0, 0, 0];\r\n        this.coord[0] = e.offsetX;\r\n        this.coord[1] = e.offsetY;\r\n      }\r\n      this.listener = this.startFilter.bind(this);\r\n      window.addEventListener(\"mouseup\", this.listener);\r\n    },\r\n    drawBoxes() {\r\n      for (let box of this.boxes) {\r\n        this.canvasContext.fillRect(\r\n          box[0] * 1000,\r\n          500 - box[3] * 500,\r\n          (box[1] - box[0]) * 1000,\r\n          (box[3] - box[2]) * 500\r\n        );\r\n      }\r\n    },\r\n    cursorShape(e) {\r\n      let x = e.offsetX,\r\n        y = e.offsetY;\r\n      switch (this.mouseDown) {\r\n        case \"move\":\r\n          this.cursor = \"grabbing\";\r\n          return;\r\n        case \"left\":\r\n        case \"right\":\r\n        case \"time\":\r\n          this.cursor = \"ew-resize\";\r\n          return;\r\n        case \"top\":\r\n        case \"bottom\":\r\n        case \"angular\":\r\n        case \"range\":\r\n          this.cursor = \"ns-resize\";\r\n          return;\r\n        case \"magnet\":\r\n        case true:\r\n          this.cursor = \"crosshair\";\r\n          return;\r\n        default:\r\n          if (this.filterMode == \"rect\") {\r\n            x /= 1000;\r\n            y = 1 - y / 500;\r\n            for (let box of this.boxes) {\r\n              if (\r\n                (Math.abs(x - box[0]) <= 0.002 ||\r\n                  Math.abs(x - box[1]) <= 0.002) &&\r\n                y > box[2] &&\r\n                y < box[3]\r\n              ) {\r\n                this.cursor = \"ew-resize\";\r\n                return;\r\n              }\r\n              if (\r\n                (Math.abs(y - box[2]) <= 0.004 ||\r\n                  Math.abs(y - box[3]) <= 0.004) &&\r\n                x > box[0] &&\r\n                x < box[1]\r\n              ) {\r\n                this.cursor = \"ns-resize\";\r\n                return;\r\n              }\r\n              if (x > box[0] && x < box[1] && y > box[2] && y < box[3]) {\r\n                this.cursor = \"move\";\r\n                return;\r\n              }\r\n            }\r\n          } else {\r\n            if (\r\n              Math.abs(x - this.coord[0]) <= 2 &&\r\n              Math.abs(y - this.coord[1]) <= 2\r\n            ) {\r\n              this.cursor = \"move\";\r\n              return;\r\n            }\r\n            if (\r\n              Math.abs(x - this.coord[2]) <= 2 &&\r\n              Math.abs(y - this.coord[3]) <=\r\n                Math.abs(this.coord[4] - this.coord[3])\r\n            ) {\r\n              this.cursor = \"ew-resize\";\r\n              return;\r\n            }\r\n            if (\r\n              x > this.coord[0] &&\r\n              x < this.coord[2] &&\r\n              y >\r\n                (this.coord[1] * (this.coord[2] - x)) /\r\n                  (this.coord[2] - this.coord[0]) +\r\n                  ((this.coord[3] - Math.abs(this.coord[4] - this.coord[3])) *\r\n                    (x - this.coord[0])) /\r\n                    (this.coord[2] - this.coord[0]) &&\r\n              y <\r\n                (this.coord[1] * (this.coord[2] - x)) /\r\n                  (this.coord[2] - this.coord[0]) +\r\n                  ((this.coord[3] + Math.abs(this.coord[4] - this.coord[3])) *\r\n                    (x - this.coord[0])) /\r\n                    (this.coord[2] - this.coord[0])\r\n            ) {\r\n              this.cursor = \"ns-resize\";\r\n              return;\r\n            }\r\n          }\r\n          this.cursor = \"crosshair\";\r\n      }\r\n    },\r\n    moveMouse(e) {\r\n      this.cursorShape(e);\r\n      if (!this.mouseDown) return;\r\n      if (this.mouseDown == \"magnet\") {\r\n        this.coord[4] = e.offsetY;\r\n      } else if (this.mouseDown == \"move\") {\r\n        this.coord[0] += e.movementX;\r\n        this.coord[2] += e.movementX;\r\n        this.coord[1] += e.movementY * this.upsideDownFactor;\r\n        this.coord[3] += e.movementY * this.upsideDownFactor;\r\n        this.coord[4] += e.movementY * this.upsideDownFactor;\r\n      } else if (this.mouseDown == \"left\") {\r\n        this.coord[0] = e.offsetX;\r\n      } else if (this.mouseDown == \"right\") {\r\n        this.coord[2] = e.offsetX;\r\n      } else if (this.mouseDown == \"bottom\") {\r\n        this.coord[3] = e.offsetY;\r\n      } else if (this.mouseDown == \"top\") {\r\n        this.coord[1] = e.offsetY;\r\n      } else if (this.mouseDown == \"time\") {\r\n        this.coord[2] = Math.max(this.coord[0] + 1, e.offsetX);\r\n      } else if (this.mouseDown == \"angular\") {\r\n        this.coord[3] += e.movementY * this.upsideDownFactor;\r\n        this.coord[4] += e.movementY * this.upsideDownFactor;\r\n      } else {\r\n        this.coord[2] = e.offsetX;\r\n        this.coord[3] = e.offsetY;\r\n      }\r\n      this.canvasContext.clearRect(0, 0, 1000, 500);\r\n      if (this.filterMode == \"rect\") {\r\n        this.canvasContext.globalAlpha = 0.3;\r\n        this.canvasContext.fillStyle = \"black\";\r\n        this.drawBoxes();\r\n        this.canvasContext.fillRect(\r\n          Math.min(this.coord[0], this.coord[2]),\r\n          Math.min(this.coord[1], this.coord[3]),\r\n          Math.abs(this.coord[2] - this.coord[0]),\r\n          Math.abs(this.coord[3] - this.coord[1])\r\n        );\r\n      } else {\r\n        this.canvasContext.globalAlpha = 1;\r\n        this.canvasContext.strokeStyle = \"black\";\r\n        this.canvasContext.beginPath();\r\n        this.canvasContext.moveTo(this.coord[0], this.coord[1]);\r\n        this.canvasContext.lineTo(this.coord[2], this.coord[3]);\r\n        this.canvasContext.stroke();\r\n        if (this.mouseDown && this.mouseDown !== true) {\r\n          let offset = this.coord[4] - this.coord[3];\r\n          this.canvasContext.beginPath();\r\n          this.canvasContext.moveTo(this.coord[2], this.coord[3] - offset);\r\n          this.canvasContext.lineTo(this.coord[2], this.coord[3] + offset);\r\n          this.canvasContext.stroke();\r\n          this.canvasContext.globalAlpha = 0.3;\r\n          this.canvasContext.fillStyle = \"black\";\r\n          this.canvasContext.beginPath();\r\n          this.canvasContext.moveTo(this.coord[0], this.coord[1]);\r\n          this.canvasContext.lineTo(this.coord[2], this.coord[3] - offset);\r\n          this.canvasContext.lineTo(this.coord[2], this.coord[3] + offset);\r\n          this.canvasContext.fill();\r\n        }\r\n      }\r\n    },\r\n    startFilter() {\r\n      if (this.filterMode == \"rect\") {\r\n        this.mouseDown = false;\r\n        if (this.coord[2] != 0 || this.coord[3] != 0) {\r\n          let [left, right] = [this.coord[0], this.coord[2]]\r\n            .map((x) => x / 1000)\r\n            .sort();\r\n          let [bottom, top] = [this.coord[1], this.coord[3]]\r\n            .map((x) => 1 - x / 500)\r\n            .sort();\r\n          this.boxes.push([left, right, bottom, top]);\r\n          let filterResult = this.contextHandler.filterRange(\r\n            left,\r\n            right,\r\n            bottom,\r\n            top\r\n          );\r\n          if (this.filter) {\r\n            this.$emit(\r\n              \"filterChange\",\r\n              this.filter.filter((x) => filterResult.includes(x))\r\n            );\r\n          } else {\r\n            this.$emit(\"filterChange\", filterResult);\r\n          }\r\n        }\r\n      }\r\n      window.removeEventListener(\"mouseup\", this.listener);\r\n      this.listener = null;\r\n    },\r\n    angleConfirm() {\r\n      if (\r\n        this.filterMode == \"ang\" &&\r\n        this.coord[2] &&\r\n        this.coord[3] &&\r\n        this.coord[0] != this.coord[2]\r\n      ) {\r\n        if (this.mouseDown === true) {\r\n          this.mouseDown = \"magnet\";\r\n          let start = [0, 0];\r\n          let end = [0, 0];\r\n          if (this.coord[0] < this.coord[2]) {\r\n            start = this.coord.slice(0, 2);\r\n            end = this.coord.slice(2, 4);\r\n          } else {\r\n            end = this.coord.slice(0, 2);\r\n            start = this.coord.slice(2, 4);\r\n          }\r\n          this.coord = [...start, ...end, 0];\r\n        } else if (this.mouseDown) {\r\n          this.mouseDown = false;\r\n          let offset = Math.abs(this.coord[4] - this.coord[3]);\r\n          let startAngle =\r\n            -(this.coord[3] + offset - this.coord[1]) /\r\n            (this.coord[2] - this.coord[0]);\r\n          let endAngle =\r\n            -(this.coord[3] - offset - this.coord[1]) /\r\n            (this.coord[2] - this.coord[0]);\r\n          this.$emit(\r\n            \"filterChange\",\r\n            this.contextHandler.filterAngle(\r\n              this.coord[0] / 1000,\r\n              this.coord[2] / 1000,\r\n              startAngle,\r\n              endAngle\r\n            )\r\n          );\r\n        }\r\n      }\r\n    },\r\n    exportFig() {\r\n      exportCanvas(\r\n        [this.$refs.canvas, this.$refs.canvasOverlay, this.$refs.canvasRawLine],\r\n        this.upsideDown\r\n      );\r\n    },\r\n  },\r\n  mounted() {\r\n    this.headers = unobserve.headers.map((title, key) => {\r\n      return { title, key, minWidth: 150 };\r\n    });\r\n    this.$Spin.show();\r\n    setTimeout(() => {\r\n      this.canvas = this.$refs.canvas;\r\n      this.canvasContext = this.$refs.canvasOverlay.getContext(\"2d\");\r\n      this.rawLineContext = this.$refs.canvasRawLine.getContext(\"2d\");\r\n      let scopeData = unobserve.aggregatedData.map((row) => {\r\n        return {\r\n          xValues: row[this.timeIndex],\r\n          yValues: row[this.valueIndex],\r\n        };\r\n      });\r\n\r\n      let maxY = scopeData[0].yValues[0],\r\n        minY = maxY;\r\n      let maxX = scopeData[0].xValues[0],\r\n        minX = maxX;\r\n      for (let i = 0; i < scopeData.length; i++) {\r\n        let length = scopeData[i].xValues.length;\r\n        for (let j = 0; j < length; j++) {\r\n          let yValue = scopeData[i].yValues[j],\r\n            xValue = scopeData[i].xValues[j];\r\n          maxY = Math.max(maxY, yValue);\r\n          minY = Math.min(minY, yValue);\r\n          maxX = Math.max(maxX, xValue);\r\n          minX = Math.min(minX, xValue);\r\n        }\r\n      }\r\n      for (let i = 0; i < scopeData.length; i++) {\r\n        let length = scopeData[i].xValues.length;\r\n        for (let j = 0; j < length; j++) {\r\n          scopeData[i].xValues[j] -= minX;\r\n        }\r\n      }\r\n\r\n      // const scaleY = d3\r\n      //   .scaleLinear()\r\n      //   .domain([0, maxY])\r\n      //   .range([0, 500]);\r\n\r\n      // compute nice bin boundaries\r\n      const binConfigX = bin({ maxbins: binsx, extent: [0, maxX - minX] });\r\n      const binConfigY = bin({ maxbins: binsy, extent: [0, maxY] });\r\n      render(\r\n        scopeData,\r\n        [0, maxX - minX, minY, maxY],\r\n        binConfigX,\r\n        binConfigY,\r\n        this.canvas\r\n      ).then((handler) => {\r\n        this.contextHandler = handler;\r\n        this.maxDensity = handler.maxDensity;\r\n      });\r\n      this.$Spin.hide();\r\n    }, 0); // ensure spin shows\r\n  },\r\n  beforeDestroy() {\r\n    if (this.contextHandler) {\r\n      this.contextHandler.destroy();\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.control-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 50px;\r\n\r\n  > * {\r\n    margin-bottom: 8px !important;\r\n  }\r\n}\r\n\r\n.color-map {\r\n  background-image: linear-gradient(\r\n    to right,\r\n    #fcfdbf,\r\n    #fece91 10%,\r\n    #fe9f6d 20%,\r\n    #f76f5c 30%,\r\n    #de4968 40%,\r\n    #b6377a 50%,\r\n    #8c2981 60%,\r\n    #651a80 70%,\r\n    #3b0f70 80%,\r\n    #150e37 90%,\r\n    #000004\r\n  );\r\n  display: inline-block;\r\n  width: 200px;\r\n  height: 32px;\r\n  margin: 0 10px;\r\n  vertical-align: middle;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CanvasBox.vue?vue&type=template&id=0639183c&\"\nimport script from \"./CanvasBox.vue?vue&type=script&lang=js&\"\nexport * from \"./CanvasBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CanvasBox.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport parse from \"csv-parse/lib/sync\";\r\nimport axios from \"axios\";\r\nvar exampleDataURL = [\r\n    require(\"../data/stocks.filtered.csv\").default,\r\n    require(\"../data/airline.filtered.csv\").default,\r\n    require(\"../data/weather.filtered.csv\").default,\r\n    require(\"../data/reading.filtered.csv\").default,\r\n];\r\n/**\r\n * Generate test time series with a random walk.\r\n * @param numSeries Number of series.\r\n * @param numDataPoints Number of data points per series.\r\n */\r\nexport function generateData(idx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var result, data;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, axios.get(exampleDataURL[idx - 1])];\r\n                case 1:\r\n                    result = _a.sent();\r\n                    data = parse(result.data, {\r\n                        skip_empty_lines: true,\r\n                    });\r\n                    return [2 /*return*/, data];\r\n            }\r\n        });\r\n    });\r\n}\r\nexport function readData(file) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            return [2 /*return*/, new Promise(function (res) {\r\n                    var reader = new FileReader();\r\n                    reader.onload = function () {\r\n                        res(parse(reader.result, {\r\n                            skip_empty_lines: true,\r\n                        }));\r\n                    };\r\n                    reader.readAsText(file);\r\n                })];\r\n        });\r\n    });\r\n}\r\n","<template>\n  <div id=\"app\">\n    <Layout>\n      <Header>\n        <Menu mode=\"horizontal\" theme=\"dark\" @on-select=\"eventHandler\">\n          <h1 class=\"layout-logo\">Density-based Timebox</h1>\n          <div class=\"layout-nav\">\n            <Upload\n              action=\"/\"\n              v-show=\"false\"\n              ref=\"upload\"\n              :before-upload=\"readFileHandler\"\n            />\n            <Submenu name=\"3\">\n              <template slot=\"title\">\n                <Icon type=\"ios-archive\"></Icon>\n                Example data\n              </template>\n              <MenuItem name=\"1-1\">Stocks(25.2M)</MenuItem>\n              <MenuItem name=\"1-2\">Airline(10.6M)</MenuItem>\n              <MenuItem name=\"1-3\">Weather(29.6M)</MenuItem>\n              <MenuItem name=\"1-4\">Reading(18.5M)</MenuItem>\n            </Submenu>\n            <MenuItem name=\"2\">\n              <Icon type=\"ios-cloud-upload-outline\"></Icon>\n              Load data\n            </MenuItem>\n          </div>\n        </Menu>\n      </Header>\n      <Content\n        :style=\"{\n          width: '1850px',\n          margin: '0 auto',\n          padding: '0 50px',\n          display: 'flex',\n          flexDirection: 'row',\n        }\"\n      >\n        <Card class=\"sticky-content\">\n          <div>\n            <p>Line Aggregation Attribute:</p>\n            <Select v-model=\"aggregateAttr\" style=\"width:200px\">\n              <Option v-for=\"(attr, i) in headers\" :value=\"i\" :key=\"i\">{{\n                attr\n              }}</Option>\n            </Select>\n            <p>Time Attribute:</p>\n            <Select v-model=\"timeAttr\" style=\"width:200px\">\n              <template v-for=\"(attr, i) in headers\">\n                <Option v-if=\"inferTypes[i] != 'string'\" :value=\"i\" :key=\"i\">{{\n                  attr\n                }}</Option>\n              </template>\n            </Select>\n            <p>Value Attribute(s):</p>\n            <Select v-model=\"valueAttr\" style=\"width:200px\" multiple>\n              <template v-for=\"(attr, i) in headers\">\n                <Option v-if=\"inferTypes[i] == 'number'\" :value=\"i\" :key=\"i\">{{\n                  attr\n                }}</Option>\n              </template>\n            </Select>\n            <br />\n            <br />\n            <Button\n              @click=\"generateCharts\"\n              type=\"primary\"\n              style=\"width:200px\"\n              :disabled=\"!headers.length\"\n              >generate chart(s)</Button\n            >\n          </div>\n        </Card>\n        <Card style=\"margin-left:20px;flex-grow:1\">\n          <div style=\"min-height: 200px;color:red\" v-if=\"!headers.length\">\n            Please load a dataset (.csv file) first!\n            <Button\n              @click=\"eventHandler('1-1')\"\n              type=\"primary\"\n              icon=\"ios-archive\"\n              style=\"margin:0 12px\"\n              >Example Stocks(25.2M)</Button\n            ><Button\n              @click=\"eventHandler('1-2')\"\n              type=\"primary\"\n              icon=\"ios-archive\"\n              style=\"margin:0 12px\"\n              >Example Airline(10.6M)</Button\n            ><Button\n              @click=\"eventHandler('1-3')\"\n              type=\"primary\"\n              icon=\"ios-archive\"\n              style=\"margin:0 12px\"\n              >Example Weather(29.6M)</Button\n            ><Button\n              @click=\"eventHandler('1-4')\"\n              type=\"primary\"\n              icon=\"ios-archive\"\n              style=\"margin:0 12px\"\n              >Example Reading(18.5M)</Button\n            >\n            <Button\n              @click=\"eventHandler('2')\"\n              type=\"primary\"\n              icon=\"ios-cloud-upload-outline\"\n              style=\"margin:0 12px\"\n              >Load data</Button\n            >\n          </div>\n          <div v-else>\n            <div\n              style=\"min-height: 200px;color:red\"\n              v-if=\"!chartConfigs.length\"\n            >\n              Please use a valid configuration in left panel!\n            </div>\n            <div v-else>\n              <template v-for=\"(config, i) in chartConfigs\">\n                <CanvasBox\n                  :key=\"\n                    config.aggregateName +\n                      '#' +\n                      config.timeName +\n                      '#' +\n                      config.valueName\n                  \"\n                  :timeIndex=\"config.timeIndex\"\n                  :valueIndex=\"config.valueIndex\"\n                  :timeName=\"config.timeName\"\n                  :valueName=\"config.valueName\"\n                  :filter=\"config.filter\"\n                  @filterChange=\"handleFilterChange(i, $event)\"\n                />\n              </template>\n            </div>\n          </div>\n        </Card>\n      </Content>\n      <!-- <Footer class=\"layout-footer-center\">2020 &copy; VisLab.Wang</Footer> -->\n    </Layout>\n  </div>\n</template>\n\n<script>\nimport CanvasBox from \"./components/CanvasBox.vue\";\nimport { generateData, readData } from \"./core/data-gen\";\nimport unobserve from \"./store\";\n\nfunction parseField(value, type) {\n  switch (type) {\n    case \"string\":\n      return 0;\n    case \"date\":\n      return Math.floor(new Date(value) / (24 * 3600 * 1000));\n    case \"number\":\n      return parseFloat(value);\n  }\n}\n\nexport default {\n  name: \"App\",\n  components: {\n    CanvasBox,\n  },\n  data() {\n    return {\n      headers: [],\n      inferTypes: [],\n      aggregateAttr: 0,\n      timeAttr: 0,\n      valueAttr: [],\n      chartConfigs: [],\n      filters: [],\n    };\n  },\n  methods: {\n    eventHandler(type) {\n      this.$Spin.show();\n      if (type.startsWith(\"1\")) {\n        generateData(type.split(\"-\")[1]).then((data) => {\n          this.$Spin.hide();\n          this.preProcessData(data);\n          this.generateCharts();\n        });\n      } else if (type == \"2\") {\n        this.$refs.upload.handleClick();\n        this.$Spin.hide();\n      }\n    },\n    readFileHandler(file) {\n      this.$Spin.show();\n      readData(file).then((data) => {\n        this.$Spin.hide();\n        this.preProcessData(data);\n        this.generateCharts();\n      });\n      return false;\n    },\n    preProcessData(data) {\n      this.headers = data[0];\n      unobserve.headers = data[0];\n      unobserve.data = data.slice(1);\n      if (data.length > 1) {\n        this.inferTypes = data[1].map((attr) => {\n          if (attr.includes(\"-\") || attr.includes(\"/\")) {\n            let isDate = new Date(attr).toString();\n            if (isDate.startsWith(\"Invalid\")) {\n              return \"string\";\n            }\n            return \"date\";\n          }\n          if (/^\\d*(\\.\\d*)?$/.test(attr)) {\n            return \"number\";\n          }\n          return \"string\";\n        });\n        this.aggregateAttr = this.inferTypes.indexOf(\"string\");\n        this.timeAttr = this.inferTypes.indexOf(\"date\");\n        let valueAttr = this.inferTypes.indexOf(\"number\");\n        if (this.aggregateAttr < 0) this.aggregateAttr = 0;\n        if (this.timeAttr < 0)\n          this.timeAttr = this.inferTypes.indexOf(\"number\");\n        if (this.timeAttr < 0) this.timeAttr = 0;\n        if (valueAttr >= 0) this.valueAttr = [valueAttr];\n      }\n    },\n    generateCharts() {\n      if (this.valueAttr.length > 3) {\n        if (\n          !confirm(\n            \"This may causing out of GPU memory, are you sure to continue?\"\n          )\n        ) {\n          return;\n        }\n      }\n      this.$Spin.show();\n      if (\n        this.headers[this.aggregateAttr] !=\n          (this.chartConfigs.length && this.chartConfigs[0].aggregateName) ||\n        this.valueAttr.find(\n          (idx) =>\n            !this.chartConfigs.find((config) => config.valueIndex === idx)\n        )\n      ) {\n        unobserve.aggregatedData = [];\n        let aggrMap = new Map();\n        const infers = {\n          [this.timeAttr]: this.inferTypes[this.timeAttr],\n          ...this.valueAttr\n            .map((idx) => {\n              return { [idx]: this.inferTypes[idx] };\n            })\n            .reduce((p, v) => {\n              return { ...p, ...v };\n            }, {}),\n        };\n        unobserve.data.forEach((row, i) => {\n          let aggrList;\n          const aggrKey = row[this.aggregateAttr];\n          if (!aggrMap.has(aggrKey)) {\n            aggrList = {\n              ref: [],\n              [this.timeAttr]: [],\n              ...this.valueAttr\n                .map((idx) => {\n                  return { [idx]: [] };\n                })\n                .reduce((p, v) => {\n                  return { ...p, ...v };\n                }, {}),\n            };\n            aggrMap.set(aggrKey, aggrList);\n          } else {\n            aggrList = aggrMap.get(aggrKey);\n          }\n          aggrList.ref.push(i);\n          aggrList[this.timeAttr].push(\n            parseField(row[this.timeAttr], infers[this.timeAttr])\n          );\n          this.valueAttr.forEach((idx) => {\n            aggrList[idx].push(parseField(row[idx], infers[idx]));\n          });\n        });\n        for (let [key, aggregated] of aggrMap.entries()) {\n          unobserve.aggregatedData.push(\n            Object.entries(aggregated).reduce(\n              (p, v) => {\n                return {\n                  ...p,\n                  [v[0]]: new Float32Array(v[1]),\n                };\n              },\n              { key }\n            )\n          );\n        }\n        aggrMap.clear();\n      }\n      this.chartConfigs = this.valueAttr\n        .map((attr) => {\n          if (attr == this.timeAttr) return null;\n          return {\n            aggregateIndex: this.aggregateAttr,\n            timeIndex: this.timeAttr,\n            valueIndex: attr,\n            aggregateName: this.headers[this.aggregateAttr],\n            timeName: this.headers[this.timeAttr],\n            valueName: this.headers[attr],\n            filter: undefined,\n            emitFilter: undefined,\n          };\n        })\n        .filter((x) => x);\n      this.filters = this.chartConfigs.map((_) => undefined);\n      this.$Spin.hide();\n    },\n    handleFilterChange(index, filter) {\n      this.filters.splice(index, 1, filter);\n      if (!this.filters.find((f) => f)) {\n        this.chartConfigs.forEach((config) => {\n          this.$set(config, \"filter\", undefined);\n        });\n        return;\n      }\n      const set = new Float32Array(\n        new Set(\n          this.filters\n            .reduce((p, v) => [...p, ...(v ? v : [])], [])\n            .filter((x) => !this.filters.find((f) => !(f && f.includes(x))))\n        )\n      );\n      this.chartConfigs.forEach((config) => {\n        this.$set(config, \"filter\", set);\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n#app {\n  min-width: 1850px;\n}\n\n.layout {\n  border: 1px solid #d7dde4;\n  background: #f5f7f9;\n  position: relative;\n  border-radius: 4px;\n}\n.layout-logo {\n  float: left;\n  position: relative;\n  left: 20px;\n  color: white;\n}\n.layout-nav {\n  // width: 420px;\n  float: right;\n  margin: 0 auto;\n  margin-right: 20px;\n}\n.layout-footer-center {\n  text-align: center;\n}\n\n.sticky-content > * {\n  position: sticky;\n  top: 0;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=bc517b26&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport iView from \"view-design\";\r\n\r\nimport \"view-design/dist/styles/iview.css\";\r\n\r\nVue.use(iView);\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n  render: h => h(App)\r\n}).$mount(\"#app\");\r\n\r\n// Detect integrated GPU\r\nconst canvas = document.createElement(\"canvas\");\r\nconst gl = canvas.getContext(\"webgl\");\r\nconst debugInfo = gl.getExtension(\"WEBGL_debug_renderer_info\");\r\nconst gpuInfo = gl\r\n  .getParameter(debugInfo.UNMASKED_RENDERER_WEBGL)\r\n  .toLowerCase();\r\nif (gpuInfo.includes(\"intel\")) {\r\n  alert(\r\n    \"Your GPU memory may not big enough to run the program properly, but you can have a try.\"\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"3e25f7c9975fbd472e611cf20d851df7.csv\";","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export default __webpack_public_path__ + \"a6681c9f5f12e0afbe1892e95414e715.csv\";","export default __webpack_public_path__ + \"b9c8219653d8ec39d5473283116881ee.csv\";"],"sourceRoot":""}